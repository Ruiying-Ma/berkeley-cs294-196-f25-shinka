# INDIVIDUAL PROGRAM SUMMARIES

The following are summaries of individual programs evaluated since the last meta update:

**Program Name: Global LRU via Access Timestamps**
- **Implementation**: Maintains a global m_key_timestamp mapping keys to cache_snapshot.access_count and evicts the cached key with the smallest timestamp (pure LRU), breaking ties by first-encountered cache order. update_after_hit/insert refresh the timestamp; update_after_evict removes the evicted key from metadata.
- **Performance**: Combined score 0.21 over 48 traces, with high hit rates on locality-friendly traces (up to 0.8680) but many low-hit traces near 0–0.05.
- **Feedback**: Captures recency effectively but degrades on scans/mixed workloads due to lack of frequency/aging and nondeterministic tie-breaking. Reliance on a global timestamp map assumes perfect sync with the cache; restricting the min search to cached keys and adding deterministic tie-breaking would improve robustness.
**Program Identifier:** Generation 0 - Patch Name initial_program - Correct Program: True

**Program Name: Segmented LRU with LFU Bias Cache**
- **Implementation**: Two LRU-ordered segments (probation/protected) via OrderedDicts with a static 80/20 split; eviction picks the least-frequency key from probation (tie by LRU), falling back to protected LRU if probation is empty. Frequencies are incremented on hits, given +1 on insert, retained across evictions, and metadata is reset per run and pruned to cache contents.
- **Performance**: Combined score 0.24; hit rates vary widely across 48 traces (up to 0.894 on trace_28, near-zero on traces 14 and 32).
- **Feedback**: LFU bias plus a large protected segment benefits skewed/locality-heavy traces but sticky frequencies and a static split reduce adaptability on scans or shifting workloads. Consider frequency aging/pruning, dynamic protected sizing, and ghost/scan-resistance mechanisms to improve stability.
**Program Identifier:** Generation 1 - Patch Name slru_lfu_hybrid - Correct Program: True

**Program Name: ARC-like Adaptive Cache with Ghost History**
- **Implementation**: Implements an ARC-like policy using OrderedDicts for T1/T2 (resident) and B1/B2 (ghost) with an adaptive target p; includes stale-resident pruning, per-list ghost bounding, capacity-change resets, LRU victim selection from T1/T2, promotion on hit, and p-adjustments on ghost hits during insert.
- **Performance**: Combined score 0.24 over 48 traces, with hit rates ranging from 0.0000 to 0.8915 (strong on several locality-heavy traces but weak on others).
- **Feedback**: Robustness features (pruning, fallbacks) keep the policy stable, but deviations from canonical ARC—per-list (not total) ghost bounds, simplified replace logic, and promoting unknown hits directly to T2—likely over-bias frequency and hurt scan-like workloads; aligning ghost sizing (B1+B2 <= capacity) and smoothing p-updates could improve consistency across traces.
**Program Identifier:** Generation 2 - Patch Name arc_adaptive_policy - Correct Program: True

**Program Name: Adaptive SLRU with protected ratio**
- **Implementation**: Segmented LRU with probationary/protected sets, LRU timestamps, promotion on hit, and eviction preferring probationary LRU; protected size is adapted via coarse global hit-rate buckets (40/60/80%). Metadata is tracked in global dicts/sets and cleaned on eviction.
- **Performance**: Combined score 0.23 across 48 traces; hit rates ranged from 0.0 to 0.8872, performing well on high-locality traces but poorly on scan/low-reuse ones.
- **Feedback**: The global hit-rate-based protected sizing is coarse and phase-insensitive, often over-protecting stale items and harming admission during workload shifts. Demotions only on hits delay enforcement of the target protected size; adding ghost history or enforcing limits on insert could reduce scan pollution and improve low-reuse performance.
**Program Identifier:** Generation 3 - Patch Name slru_with_adaptive_protected_ratio - Correct Program: True

**Program Name: Adaptive LRFU with Exponential Decay**
- **Implementation**: Maintains per-key decayed frequency scores with exponential decay (half-life 16 accesses), lazily applied on hits and during eviction scans; uses an initial insert score of 0.5 and LRU tie-breaks for equal scores. Metadata is per-key via global dicts, and eviction scans all cache keys to pick the minimum score.
- **Performance**: Combined score 0.22 over 48 traces, with hit rates ranging from 0.0 to 0.8699 (e.g., 0.8699 on trace_28, 0.7277 on trace_34, and 0.0 on traces_14 and _33).
- **Feedback**: Performs well on workloads with temporal locality/reuse bursts but struggles on scans or high-entropy traces where items seldom get reinforced. Tuning half-life or insertion credit (and the O(capacity) victim scan) could improve robustness across diverse patterns.
**Program Identifier:** Generation 4 - Patch Name lrfu_decay_eviction - Correct Program: True

**Program Name: Hybrid SLRU + LRFU Cache**
- **Implementation**: Segmented LRU (probationary/protected) with exponential-decay frequency scoring selects eviction by minimal decayed score within a segment, tie-breaking by older last access. Uses lazy decay (half-life=16), a fixed 70% protected target, promotion on second touch, initial insert score 0.5 to resist scans, and self-healing segment bookkeeping.
- **Performance**: Combined score 0.23; strong on locality-heavy traces (peaks up to 0.8812) but many traces remain low (<0.1).
- **Feedback**: Probation-first eviction and decayed-frequency boosts retain hot items, yet the fixed protected split and O(n) min-score selection reduce adaptability and may add overhead on diverse/scan-heavy workloads. Tuning half-life/split or adding admission/scan-resistance could lift weak-trace performance.
**Program Identifier:** Generation 5 - Patch Name slru_lrfu_hybrid - Correct Program: True

**Program Name: ARC-TinyLFU with Sampled LFU**
- **Implementation**: Implements ARC with T1/T2 resident lists and B1/B2 ghost lists in OrderedDicts, an adaptive target p, and a Count-Min Sketch (4 hashes, width 2^13) with conservative aging to guide admission and frequency-aware victim choice. Eviction samples k=3–8 LRU-side candidates from the chosen segment and evicts the minimum-sketch item; hits promote T1→T2, ghost hits adjust p, and cold inserts hot-admit to T2 only if sketch≥2.
- **Performance**: Combined score 0.24 over 48 traces, with hit rates ranging from near-zero on several scans to strong on high-locality traces (peak 0.8941; many mid-0.45–0.54).
- **Feedback**: Frequency-biased sampling reduces cache pollution and boosts reuse-heavy workloads, but fixed sketch sizing/aging and the ≥2 hot-admit threshold can under-admit short bursts and struggle on scan-like traces (e.g., 11, 13–20, 29–33). Bounding ghost lists and resetting on capacity change ensure consistency but drop history; tuning sample size, dynamic aging, or adaptive admission thresholds may reduce variance.
**Program Identifier:** Generation 6 - Patch Name arc_tiny_sampled_lfu - Correct Program: True

**Program Name: WTinyLFU with ARC-style window**
- **Implementation**: Implements Window-TinyLFU with ARC-like adaptive window size (p) and segmented main (W/P/H) using OrderedDict LRU. Uses a 3-hash Count-Min Sketch (width 4096) with periodic halving, frequency-aware sampled LRU victim selection, and ghost histories (Gw/Gm) to adjust p.
- **Performance**: Combined score 0.22 across 48 traces; strong on locality-heavy traces (peaks at 0.874) but many traces are near 0.00–0.08.
- **Feedback**: The adaptive window and decayed sketch effectively capture repeated hot sets, boosting hits on stable-locality workloads. Low scores on many traces suggest sensitivity to scans or rapid shifts, likely influenced by small sampling (k≤8), conservative competitive admission (favoring evicting W when new ≤ P), and tight H bounding tied to p.
**Program Identifier:** Generation 7 - Patch Name win_tinylfu_arc_adapt - Correct Program: True

**Program Name: ARC-inspired adaptive cache eviction**
- **Implementation**: Implements an ARC-like policy with OrderedDict-based LRU segments: probation (T1), protected (T2), and ghost lists (B1/B2), and an adaptive target m_p adjusted on ghost hits. Hits promote to protected; evictions prefer T1 when len(T1) > m_p; metadata resets between runs, ghost lists are capacity-bounded, and a frequency counter is tracked but unused.
- **Performance**: Combined score 0.24 over 48 traces, with best hit rates up to 0.8915 but many traces near 0.0.
- **Feedback**: Effective on high-locality workloads due to promotion and ghost-based adaptation, but lack of explicit T1/T2 size control/demotion and unused frequency signal likely cause cache pollution and weak scan resistance. Enforcing segment targets (e.g., using the defined protected target), adding demotion, and leveraging frequency/aging could improve robustness across diverse traces.
**Program Identifier:** Generation 8 - Patch Name arc_adaptive_eviction_with_ghosts - Correct Program: True

**Program Name: Adaptive ARC + TinyLFU Cache**
- **Implementation**: Combines ARC’s T1/T2 with ghost lists (B1/B2) and adaptive target p; a capacity-aware Count-Min Sketch with conservative aging informs TinyLFU-based admission and sampled-LRU (4–12 keys) victim selection. Includes pruning of desynced state and bounded ghosts, counter capping, and capacity-change resets.
- **Performance**: Combined score 0.24; strong on locality-heavy traces (up to ~0.89), moderate ~0.45–0.53 on many, and very low on streaming/adversarial traces (several near 0).
- **Feedback**: Sampling the LRU tail and f(new) vs T2 comparisons effectively protect hot items, but conservative aging and small samples can under-adapt to rapid phase shifts, hurting scan-heavy workloads. More aggressive/phase-aware aging or larger sampling could improve robustness on low-reuse traces.
**Program Identifier:** Generation 9 - Patch Name w-tinylfu_competitive_eviction_and_adaptive_aging - Correct Program: True

**Program Name: Hybrid SLRU-LRFU with ARC-style adaptation**
- **Implementation**: Uses two LRU segments (probationary/protected) with per-key exponentially decayed frequency scores (half-life 16) and ARC-style ghost lists (B1/B2) to adapt the T1 target (alpha 0.25). Eviction chooses the minimum decayed-score key within the over-target segment (tie-break by older last access); hits decay-and-bump score and promote/demote, while inserts initialize score=0.5 to reduce scan pollution.
- **Performance**: Combined score 0.23 across 48 traces, with hit rates ranging from 0.0 to 0.8869 (strong on locality-heavy traces, weak on streaming/one-timers).
- **Feedback**: Adaptive split and decayed scoring favor frequent items and provide scan resistance, but slow adaptation and score-based victim selection can underperform on pure recency workloads. Tuning the decay half-life and adaptation rate (and possibly using LRU victiming in probationary) may improve consistency across diverse traces.
**Program Identifier:** Generation 10 - Patch Name arc_lrfu_with_ghosts_and_adaptive_split - Correct Program: True

**Program Name: Adaptive SLRU+LRFU with lazy decay**
- **Implementation**: Combines SLRU segments (probation/protected) with lazy exponential-decay LRFU scoring (half-life 8 accesses), promoting probation hits, demoting protected when exceeding an adaptive cap, and evicting the minimal decayed-score key preferring probation (ties by older last access). Inserts get a small initial score (0.1) to curb scans; hits add 1.5 in protected vs 1.0 in probation.
- **Performance**: Combined score 0.22 across 48 traces, ranging from strong on locality-heavy traces (up to 0.871) to very low on scan/unique-key traces (down to 0.000).
- **Feedback**: Probation-first eviction and low admission score reduce scan pollution; the +1/−1 protected-cap adjustment adapts to frequency but may oscillate. Treating unknown-hit keys as protected can over-favor frequency and hurt recency on bursty/scan-heavy workloads.
**Program Identifier:** Generation 11 - Patch Name slru_lrfu_hybrid_with_adaptive_protected - Correct Program: True

**Program Name: ARC with TinyLFU Admission**
- **Implementation**: ARC with T1/T2/B1/B2 using OrderedDict and adaptive target p; competitive admission via a Count-Min Sketch (w=4096, d=3) with conservative aging, LRU-side sampling (k=4–12) to choose min-frequency victims, and gated promotion to T2 (threshold ≥2). Ghost lists are maintained per-segment and bounded individually by capacity; policy state is pruned against the live cache and reset on capacity changes.
- **Performance**: Combined score 0.24 across 48 traces, with best hit rates up to 0.8853 but several workloads near zero.
- **Feedback**: TinyLFU-driven admission and ARC’s p-adaptation protect hot items and perform well under temporal/frequency locality, but low scores on scan/noisy traces suggest slow adaptation from the promotion threshold and limited LRU sampling. Bounding B1/B2 separately (vs. jointly) and fallback use of last-evicted segment may reduce classic ARC sensitivity and occasionally misclassify evictions.
**Program Identifier:** Generation 12 - Patch Name arc_tiny_lfu_competitive_admission - Correct Program: True

**Program Name: Adaptive SLRU-LRFU with TinyLFU**
- **Implementation**: Two-segment SLRU (probation/protected) guided by an exponential-decay LRFU score with lazy time-based decay (half-life=16 accesses), and TinyLFU (4x2048 CM-sketch with periodic halving) for admission/promotion gating. Evicts the minimal decayed-score key preferring probation, adapts protected capacity based on promotions and a simple scan detector, and initializes scores conservatively (0.1 probation, 0.6 protected).
- **Performance**: Combined score 0.23 across 48 traces, with hit rates ranging from near 0 to 0.89 and mid-range results on several traces (~0.47–0.54).
- **Feedback**: Frequency-biased promotions and decayed scoring perform well on skewed/repetitive workloads but underperform on scans/one-timers, indicating slow adaptation despite the scan guard. Tighter admission/demotion and tuning of decay half-life and protected-cap dynamics could improve robustness across adversarial traces.
**Program Identifier:** Generation 13 - Patch Name slru_lrfu_tinylfu_admission_scan_guard - Correct Program: True

**Program Name: Adaptive SLRU with TinyLFU Bias**
- **Implementation**: Two-tier SLRU (probation/protected OrderedDicts) with a 4-row Count-Min Sketch (power-of-two width, periodic halving); eviction samples up to 8 LRU candidates and evicts the one with the lowest estimated frequency. Protected size is adjusted via an EMA of hit-rate with a miss-streak scan detector; inserts add a doorkeeper credit and hits promote only if sketch≥2.
- **Performance**: Combined score 0.24 over 48 traces; hit rates span 0.0000–0.8917, strong on locality-rich traces (27–28, 34, 38) and weak on many low-reuse/scan-like traces.
- **Feedback**: Adaptive protected sizing and frequency bias preserve hot sets well, but conservative promotion and slow scan detection (miss_streak > 2×capacity) likely under-serve short bursts and scans, leading to very low hit rates in several traces. Faster adaptation (lower promotion threshold, quicker EMA, or adjusted scan trigger) and/or larger eviction samples could improve responsiveness without sacrificing hot-set retention.
**Program Identifier:** Generation 14 - Patch Name slru_tiny_ema - Correct Program: True

**Program Name: Adaptive SLRU+LRFU with TinyLFU bias**
- **Implementation**: Combines SLRU segments (probation/protected) with an exponentially decayed LRFU score per key, a 4-hash CM-sketch TinyLFU (4096 width, periodic halving) for admission/promotion and victim bias, plus dynamic half-life and adaptive protected-cap tuning based on miss streaks. Eviction prefers probation, then protected with a TinyLFU-based penalty to avoid evicting hotter items; hits boost scores (+1.0/+1.5) and inserts seed scores (0.1/0.7).
- **Performance**: Combined score 0.0; the program is marked incorrect and fails validation tests.
- **Feedback**: Despite rich heuristics, the implementation likely violates the expected interface or invariants (e.g., evict returning a key vs. object, or segment/bookkeeping desynchronization), causing functional failures. The aggressive, dynamic decay and cap adjustments may also destabilize admission/promotion, degrading effectiveness even when it runs.
**Program Identifier:** Generation 15 - Patch Name slru_lrfu_tinylfu_wbiased - Correct Program: False

**Program Name: ARC+TinyLFU cache with adaptive ghosts**
- **Implementation**: ARC with T1/T2 residents and B1/B2 ghosts, adaptive p, and TinyLFU via a decayed Count-Min Sketch; victim selection samples LRU-side keys and evicts the min-estimated-frequency, with competitive admission and gated promotion (threshold ≥2). Includes scan-mode bias, capacity-aware tuning (sample_k, sketch aging), and pruning of stale residents/ghosts.
- **Performance**: Combined score to maximize: 0.24 across 48 traces; peaks up to 0.8855 on some repetitive/hot-set traces but many workloads show very low hit rates.
- **Feedback**: Strong on LFU-friendly/repetitive patterns (e.g., traces 27, 28, 34, 38) but weak on scans/high-diversity streams (e.g., traces 14, 32–33), suggesting scan detection triggers too late and TinyLFU gating may be too conservative. Consider faster scan detection/cooldown and slightly relaxing promotion/admission thresholds to better capture short-term locality.
**Program Identifier:** Generation 16 - Patch Name arc_tlfu_scan_ghost_smooth - Correct Program: True

**Program Name: Windowed TinyLFU with SLRU main**

- **Implementation**: Implements W-TinyLFU with three OrderedDict segments (W, M1 probationary, M2 protected) and a Count-Min Sketch (d=3, width 4096) with halving-based aging scaled to capacity; admission prefers evicting W when at target, otherwise compares the new item’s frequency to a sampled low-frequency M1 candidate, with promotions (M1→M2) on hits and demotions to maintain protected size. Includes adaptive sampling (k=4–12), 20% window, 80% protected share of main, and a self-heal pass to resync segments with the backing cache.
- **Performance**: Combined score 0.23 across 48 traces, with hit rates peaking at 0.85 on skewed/locality-heavy workloads and dropping to ~0.00–0.02 on scan-like/low-reuse traces.
- **Feedback**: Strong results on frequency-skewed traces validate TinyLFU-based admission and SLRU promotions, but poor streaming performance suggests the 20% window and current admission rule (no W-victim comparison/doorkeeper, non-conservative increments) allow main pollution. Tuning window/protected fractions and aligning admission with canonical TinyLFU could improve scan resistance and stability across workloads.
**Program Identifier:** Generation 17 - Patch Name wtinylfu_slru_window - Correct Program: True

**Program Name: Segmented LRU + TinyLFU with ARC ghosts**
- **Implementation**: Two-segment LRU (probation/protected) augmented with ARC-style B1/B2 ghost lists and a 4-row Count-Min Sketch (power-of-two width, periodic halving) to bias admission/promotion (threshold ≥2) and sampled eviction (pick lowest estimated frequency among up to 8 LRU candidates). Protected size is adaptively targeted via EMA of hit rate with a miss-streak scan detector, and ghost hits adjust the target by ±0.1.
- **Performance**: Combined score 0.23; per-trace hit rates span 0.0–0.8881 across 48 traces, with strong results on locality-heavy traces (e.g., 27/28/34/38) and weak results on low-reuse/scan-like traces (many <0.1).
- **Feedback**: Frequency bias and adaptive protected sizing preserve hot sets, but sketch aging and scan adaptation appear too sluggish for scans/phase shifts, yielding very low hit rates on several traces. Tuning promotion threshold, miss-streak sensitivity, and CMS width/aging could improve robustness across diverse workloads.
**Program Identifier:** Generation 18 - Patch Name arc_tinylfu_with_ghosts_and_adaptive_replace - Correct Program: True

**Program Name: Adaptive SLRU+LRFU with TinyLFU**
- **Implementation**: Two-segment SLRU (probation/protected) with LRFU-style exponential-decay scores (half-life=8) selects victims, while a Count-Min Sketch–based TinyLFU (with periodic conservative aging) guides admission/promotion. Protected capacity adapts (grows on promotions, shrinks on detected scans) and demotes the lowest-score protected key when over cap; hits boost scores more in protected than probation.
- **Performance**: Combined score 0.23; strong hit rates on locality-rich traces (up to 0.88) and moderate ~0.45–0.54 on others, but many traces show very low hit rates, including several near zero.
- **Feedback**: The design limits scan pollution and favors frequent keys, yielding high scores on repetitive workloads, but the promote threshold and short half-life can over-penalize single-hit or long-reuse items, hurting performance on diverse/scan-heavy traces. Consider softer or dynamic admission thresholds and more responsive decay/cap tuning to better balance recency and frequency.
**Program Identifier:** Generation 19 - Patch Name slru_tinylfu_promotion_scan_guard - Correct Program: True

**Program Name: ARC+TinyLFU with scan-aware eviction**
- **Implementation**: Combines ARC (T1/T2 with B1/B2 ghosts and adaptive target p) with a Count-Min Sketch (capacity-tuned aging) to guide promotion/admission and sampled LRU-min-frequency victim selection; includes scan detection via miss-streak that biases evictions to T1 and suppresses direct T2 admissions. Ghost lists are bounded and periodically pruned, and promotions from T1 require frequency thresholds (stricter during scan mode).
- **Performance**: Combined score 0.24 over 48 traces, with hit rates ranging from 0.0000 to 0.8855 (notably strong on skewed/locality traces like 27/28/34/38, weaker on others).
- **Feedback**: TinyLFU-based competitive admission and promotion gating protect T2 and excel on heavy-tail workloads, but the scan detector (miss-streak > 2×capacity) and conservative promotion thresholds can delay T2 admission, producing near-zero hit rates on short scans or rapidly shifting workloads. Periodic ghost trimming and small LRU-side sampling (k up to 12) may dampen ARC’s adaptivity, contributing to high variance across traces.
**Program Identifier:** Generation 20 - Patch Name arc_tinylfu_coldest_candidate_scan_guard_ghost_aging - Correct Program: True

**Program Name: W-TinyLFU with adaptive window SLRU**
- **Implementation**: Implements windowed TinyLFU using OrderedDict-based W/M1/M2 (SLRU) segments, a 3-hash Count-Min Sketch (width 4096 min, conservative aging), and adaptive window-size tuning. Eviction admits by comparing f(new) to a sampled low-frequency candidate from M1 (fallback M2), with early promotion from W (est ≥ 3), frequency-aware demotion to balance M2, self-healing against cache state, and capacity-based parameterization.
- **Performance**: Combined score 0.26 over 48 traces, with hit rates spanning 0.0000–0.8740 (best: 0.8740 on trace_28; several traces near 0.02–0.06).
- **Feedback**: Strong on skewed/reuse-heavy workloads but weak on scans/low-locality traces where admission disfavors recency and the window can be too small. Consider enlarging/tuning the window more aggressively and broadening sampling/admits to reduce near-zero-hit cases.
**Program Identifier:** Generation 21 - Patch Name wtinylfu_adaptive_window_m2_sampling - Correct Program: True

**Program Name: ARC+TinyLFU with adaptive CM-sketch**
- **Implementation**: ARC with T1/T2 and ghost lists (B1/B2) guided by a decayed Count-Min Sketch; eviction samples the LRU side and removes the minimum estimated-frequency key, while admission compares f(new) vs a sampled T2 victim. It includes damped adaptive p updates, scan-mode detection via miss streak to bias toward T1, capacity-aware sketch aging and sample size, and ghost pruning/bounding.
- **Performance**: Combined score 0.24; strong on skewed/hot traces (up to 0.8855) but many traces are low or near zero, yielding moderate overall performance.
- **Feedback**: Competitive admission and promotion gating protect T2 and work well on high locality, but scan detection and stricter thresholds likely under-serve sequential or churn-heavy workloads. Consider more aggressive T1 growth during scans and slightly lower T2 admission/promotion thresholds to reduce near-zero-hit cases.
**Program Identifier:** Generation 22 - Patch Name arc_tlfu_victim_rule_refine - Correct Program: True

**Program Name: Hybrid TinyLFU–LRFU SLRU Cache**
- **Implementation**: Uses a Count-Min Sketch with periodic aging for TinyLFU admission, a window LRU (W) plus SLRU main (M1 probationary, M2 protected), and LRFU-style decayed scores to sample cold candidates and drive promotion/demotion. It adaptively tunes window size via hit feedback, performs early promotion from W on hot hits, and includes self-healing to sync segments with the cache.
- **Performance**: Combined score 0.25 across 48 traces; hit rates ranged from 0.0000 to 0.8708, with strong results on locality/skewed traces (e.g., 27, 28, 34, 38) and weak on scan-like workloads (e.g., 14–19).
- **Feedback**: The pairing of TinyLFU admission with decayed scoring and protected demotions effectively preserves reusable items, boosting performance on reuse-heavy traces. Underperformance on scans suggests the default 20% window and admission biases (+1/+2) may be too conservative; relaxing protection or widening the window could improve scan/burst resilience.
**Program Identifier:** Generation 23 - Patch Name wtinylfu_lrfu_hybrid_slru - Correct Program: True

**Program Name: Adaptive W-TinyLFU with SLRU**
- **Implementation**: Implements Windowed TinyLFU using a Count-Min Sketch with conservative aging, a window LRU (W) and two-segment SLRU main (M1 probationary, M2 protected). Adds adaptive window sizing based on hit distribution, frequency-gated promotions/demotions, scan detection with cooldown-biased admission, capacity-scaled sketch aging, and self-healing of segment state.
- **Performance**: Combined score 0.26 across 48 traces; hit rates span 0.0000–0.8740 with strong results on locality-heavy traces and weak on scans/low-reuse patterns.
- **Feedback**: Scan-aware bias and conservative admission protect main cache but likely suppress beneficial admissions on some workloads, contributing to very low hits on several traces. Limited LRU-side sampling for victim selection and tight thresholds may over-protect M1/M2; relaxing bias/tuning and broader sampling could improve mixed-workload performance.
**Program Identifier:** Generation 24 - Patch Name wtinylfu_scan_gate_bias - Correct Program: True

**Program Name: Hybrid TinyLFU-LRFU with SLRU and scan defense**
- **Implementation**: Window LRU (W) plus SLRU main (probation/protected) with TinyLFU admission and LRFU-style decayed scores for sampled victim/demotion; includes Count-Min Sketch with periodic aging, adaptive window tuning, scan detector with cooldown bias, and self-healing metadata. Eviction compares new frequency to sampled cold candidates and biases against main during suspected scans.
- **Performance**: Combined score 0.25 over 48 traces; hit rates ranged 0.0–0.8675 with peaks on traces 27–28, 34, and 38.
- **Feedback**: Excels on high-locality/frequent-reuse workloads where protected promotion and frequency gating help (e.g., traces 27–28), but performs poorly on scans/low-reuse sequences (e.g., 11, 13–16, 14=0.0), indicating the scan bias and admission thresholds may still be miscalibrated or adapt too slowly on some mixes. Consider tuning window size dynamics and TinyLFU biases to reduce near-zero cases without sacrificing main protection.
**Program Identifier:** Generation 25 - Patch Name scan_aware_admission_and_bias - Correct Program: True

**Program Name: Hybrid TinyLFU+LRFU SLRU cache**
- **Implementation**: Windowed TinyLFU admission paired with SLRU main (M1 probation/M2 protected) and LRFU-decayed scores, sampling cold victims via lexicographic (sketch estimate, decayed score) among k LRU keys. Includes adaptive window tuning, capacity-tuned sketch aging/half-life, early window-to-protected promotion, scan detection with cooldown bias, and self-healing of segment state.
- **Performance**: Combined score 0.24 over 48 traces; hit rates span 0.0000–0.8872, strong on locality/skewed traces (e.g., 27/28/34/38) but weak on streaming/low-reuse workloads.
- **Feedback**: LRFU decay plus TinyLFU sampling protects hot items and scan-bias reduces pollution, but aggressive biases/thresholds and a small default window (20%) likely under-admit recency, leading to many near-zero traces. Consider relaxing scan bias/admission thresholds, lengthening half-life, or enlarging/tuning window/protected ratios to stabilize performance under scans and churn.
**Program Identifier:** Generation 26 - Patch Name wtinylfu_eviction_bias_refine - Correct Program: True

**Program Name: ARC+TinyLFU with EMA and sampled eviction**
- **Implementation**: ARC with T1/T2 resident and B1/B2 ghost LRU lists, augmented by a TinyLFU Count-Min Sketch (8-bit counters, conservative aging) for frequency estimates. p is EMA-tuned on ghost hits; eviction first chooses ARC side (T1/T2) then samples up to k LRU-end keys to evict the lowest-estimate, with self-healing of lists and ghosts bounded to capacity.
- **Performance**: Combined score 0.24 across 48 traces, with hit rates ranging from 0.0000 to 0.8862; validation tests all passed.
- **Feedback**: Frequency-guided sampling preserves hot items (strong on locality-heavy traces) but the policy struggles on scan/noisy workloads (many near-zero traces). Bounding ghost history to C (not 2C as in ARC) and retaining the sketch across capacity/trace changes likely slow/blur adaptation and hurt phase changes.
**Program Identifier:** Generation 27 - Patch Name arc_tinylfu_adaptive - Correct Program: True

**Program Name: ARC-inspired cache with freq sampling and ghosts**
- **Implementation**: Uses ARC-style probation/protected segments (T1/T2) with ghost lists (B1/B2) and adaptive m_p, managed via OrderedDict LRUs. Evicts by sampling a few keys from the LRU side and choosing the lowest-frequency; maintains lightweight per-key frequency with periodic aging, enforces ~80% protected via promotion gates and demotion.
- **Performance**: Combined score 0.25 across 48 traces, with highs up to 0.8882 and several lows near 0.0–0.09.
- **Feedback**: Strong on workloads with stable hot sets thanks to large protected segment and frequency-aware eviction. Weak on scans/rapid churn where over-protection and limited ARC balancing (unused miss-streak, fixed ~80% protected) reduce recency; tuning m_p/protected target or leveraging streaks could improve scan resistance.
**Program Identifier:** Generation 28 - Patch Name arc_tinylfu_sampling_aging - Correct Program: True

**Program Name: Hybrid TinyLFU-SLRU with LRFU Decay**
- **Implementation**: Windowed TinyLFU with SLRU main (W/M1/M2) uses a Count-Min Sketch with periodic halving and capacity-tuned LRFU-decayed scores. Victims are sampled from k LRU positions using a lexicographic (TinyLFU estimate, decayed score), with adaptive window sizing, scan-biased admission thresholds, early promotion, and decayed-aware demotions; state self-heals on desync.
- **Performance**: Overall combined score 0.25 across 48 traces; hit rates range 0.0000–0.8737, strong on locality-rich traces but very low on several long-tail/scan-heavy workloads; passes all validations.
- **Feedback**: TinyLFU-gated admission and early promotions benefit frequent reusers, but the scan detector and strict biasing often suppress helpful admissions, hurting recency-heavy or low-repeat traces. The 20% default window and slow tuning step/period can under-adapt to bursts, contributing to poor results on many traces despite excellent peaks on a few.
**Program Identifier:** Generation 29 - Patch Name wlru_admission_balance_and_promotion_tighten - Correct Program: True

**Program Name: Windowed TinyLFU with SLRU Main Segments**
- **Implementation**: Uses a Count-Min Sketch with conservative aging to guide TinyLFU admission/eviction across a window LRU (W) and SLRU main (probationary M1, protected M2), with frequency-aware sampling and capacity-aware tuning. Includes scan detection via miss-streak cooldown, a recent hot-bypass filter to M2, adaptive window sizing from hit mix, and self-healing against snapshot desync.
- **Performance**: Combined score 0.22 across 48 traces; hit rates ranged from 0.0000 to 0.8740, with strong results on locality-rich traces (e.g., 0.8740 on trace 28) and weak/zero on several scan-like workloads.
- **Feedback**: TinyLFU-gated admission and scan bias effectively protect main cache under locality but appear over-protective on recency-heavy/scan traces, leading to under-admission and very low hits. Relaxing bias/thresholds or allowing a larger/more responsive window during heavy miss streaks could improve balance.
**Program Identifier:** Generation 30 - Patch Name hot_bypass_recent_filter - Correct Program: True

**Program Name: ARC + TinyLFU-lite with sampled eviction**
- **Implementation**: ARC-style two-segment design (probation/protected) with B1/B2 ghost lists and adaptive m_p, plus TinyLFU-lite frequencies with periodic halving; admission compares new key vs last victim and uses a fixed hot threshold, while eviction samples the LRU side and picks the lowest-frequency candidate. Protected is targeted at ~80% of capacity with demotion; metadata is reset/pruned per run and ghost sizes are bounded.
- **Performance**: Combined score 0.24 across 48 traces, with strong peaks on locality-rich workloads (up to 0.8877) and many low/near-zero results on churny/scan-like traces; program passes all validation tests.
- **Feedback**: The sampled TinyLFU admission and large protected target retain hot sets well, but slow decay (interval ≈4×capacity) and a fixed threshold can preserve stale history and hurt phase adaptability, leading to poor results on rapidly shifting or oversized working sets. More aggressive ARC balancing (m_p responsiveness), faster decay, and stricter T1-biased eviction could improve robustness across diverse traces.
**Program Identifier:** Generation 31 - Patch Name arc_tinylfu_sampling_aging - Correct Program: True

**Program Name: Windowed TinyLFU+ with SLRU and hot-bypass**
- **Implementation**: Uses a conservative Count-Min Sketch with periodic aging to guide a 4-segment SLRU (W1/W2 window, M1/M2 main), with competitive admission from W1 to M1 (sampling low-frequency M1 victims), hot-bypass to M2, and adaptive window ramping plus sketch aging based on miss streaks and hit mix. Eviction favors replacing cold M1 over window entries with a ramp-dependent bias, includes self-healing against cache-policy desync, and size targets keep W2 ≈30% of the window and M2 protected by frequency-aware demotions.
- **Performance**: Combined score 0.24 over 48 traces, with strong hits on locality-heavy traces (peaks ~0.88) but many low/near-zero results dragging down the average; program is correct and passes all validations.
- **Feedback**: The hot-bypass and main-protection bias help bursty/locality-heavy workloads but hurt cold-start, scans, and sparse reuse, leading to numerous near-zero traces. Tuning triggers (miss_streak > 0.5·C), high bypass/promotion thresholds, and relatively small default window (20% with W2 at 30% of it) may be too conservative, suggesting relaxing thresholds or quicker aging to improve adaptability on mixed/short traces.
**Program Identifier:** Generation 32 - Patch Name wtinylfu_slru_plus_tlfu_conservative - Correct Program: True

**Program Name: ARC-inspired TinyLFU Hybrid Cache**
- **Implementation**: Combines ARC-style probation/protected LRU segments with ghost lists (B1/B2) and adaptive p, plus sampled TinyLFU-based frequency with periodic aging for admission/eviction; enforces a fixed ~80% protected target with demotion and scan-bias via miss-streak heuristics. Eviction samples LRU-side keys from each segment and evicts the lower-frequency candidate, while ghost hits adjust p with damping.
- **Performance**: Combined score 0.25 across 48 traces, with strong hit rates on locality-heavy traces (peaking at 0.8884) but many low/near-zero results on scan-like or high-entropy workloads.
- **Feedback**: The fixed 80% protected target and ghost lists bounded to capacity (vs. ARC’s typical 2×cap) constrain ARC’s adaptation, likely hurting responsiveness to scans and workload shifts. Promotion thresholds and aggressive scan-bias can under-admit short-term reuse, contributing to weak performance on medium-locality traces.
**Program Identifier:** Generation 33 - Patch Name arc_tinylfu_competitive_with_scan_bias - Correct Program: True

**Program Name: Adaptive SLRU with TinyLFU Bias**
- **Implementation**: Two-segment SLRU (probation/protected) with a Count-Min Sketch (depth=4, power-of-two width scaled to capacity) aged periodically; admission compares new-item frequency to a sampled probation candidate, and eviction samples K=8 from LRU heads picking the lowest estimated frequency. Protected size adapts via an EMA of hit rate with a miss-streak scan detector; promotes on first hit, includes hot-item bypass, and prunes/seeds metadata with run resets.
- **Performance**: Combined score 0.23; hit rates spanned 0.0000–0.8834 across 48 traces, peaking on 27/28/34/38 and ~0.5 on 8–10, but low on many others.
- **Feedback**: Frequency-aware sampling and adaptive protected sizing effectively retain stable hot sets, delivering strong results on temporally-local traces. However, the scan detector (trigger at >2×capacity misses), conservative EMA smoothing, and hot-bypass thresholds (>=4) likely under-admit short bursts and scans, leading to many sub-0.15 traces; faster scan response and lower admission thresholds may improve robustness.
**Program Identifier:** Generation 34 - Patch Name tinyf_arc_admission_compare_and_fast_promotion - Correct Program: True

**Program Name: Hybrid WTinyLFU + SLRU-LRFU Cache**
- **Implementation**: Windowed TinyLFU with SLRU main (probation/protected) and LRFU-style decayed scores; Count-Min Sketch (w=2^12, d=3) with periodic aging. Eviction/admission sample k LRU candidates using TinyLFU+decayed score, with adaptive window tuning (5–50%), hot-bypass (≥5), and early promotion thresholds (est≥3 or dec≥1.5).
- **Performance**: Combined score 0.24 with hit rates ranging from 0.0000 to 0.8763 across 48 traces.
- **Feedback**: Strong on workloads with temporal/frequency locality (e.g., traces 27/28/34) but weak on scan-like or fast-shifting patterns (several near-zero traces), indicating window/tune-period and threshold tuning could help. Capacity-aware decay and self-heal aid stability, but sample_k scaling and protected fraction may drive variance in small caches.
**Program Identifier:** Generation 35 - Patch Name competitive_admission_hot_bypass - Correct Program: True

**Program Name: Regret-ARC TinyLFU Hybrid**
- **Implementation**: Combines ARC (T1/T2 with B1/B2 ghosts and adaptive p) with a conservative Count-Min Sketch (4 hashes, power-of-two width, periodic halving) to guide admission, promotion, and victim selection via LRU-sampled, min-frequency candidates. Adds regret-driven p-adjustments on reaccess, scan detection via miss streak/cooldown, hot-bypass to T2, promotion thresholds, and bounds T2 to 80% of capacity.
- **Performance**: Combined score 0.25 across 48 traces; strong peaks on several traces (up to 0.8838, 0.8242, 0.7548, 0.6394, 0.5402) but many low-hit traces (some near 0.0).
- **Feedback**: Frequency-guided sampling and regret help on locality-rich workloads, but scan handling, damped p updates (alpha=0.25), and conservative promotion/bypass thresholds (2–3/5) likely under-admit mid-frequency items, hurting long-tail/scan-heavy traces. Tuning thresholds, cooldown, and sample_k or relaxing T2 bounding may improve balance and reduce low-end failures.
**Program Identifier:** Generation 36 - Patch Name lecar_arc_tinylfu_hybrid - Correct Program: True

**Program Name: ARC-TinyLFU with sampled LRU eviction**
- **Implementation**: ARC-style two-segment LRU (probation/protected) with B1/B2 ghost lists and adaptive partition m_p. Eviction samples LRU-side candidates and evicts the lowest TinyLFU count; insertion uses TinyLFU-lite with periodic decay (~4×capacity), last-victim comparison, and an 80% protected target with demotion.
- **Performance**: Combined score 0.24; strong on some traces (up to 0.8881) but many traces show low/near-zero hit rates.
- **Feedback**: ARC adaptation plus LFU-based sampling preserves hot sets and boosts repetitive/bursty workloads. However, a large protected fraction and slow frequency aging can retain stale popularity and underperform on scans or phase shifts; tuning hot_thresh, decay interval, and protected target may improve balance.
**Program Identifier:** Generation 37 - Patch Name arc_tlfu_sampling_promotion - Correct Program: True

**Program Name: WTinyLFU-SLRU with LRFU-decayed Scoring**
- **Implementation**: Combines a window LRU with a segmented main (M1 probationary, M2 protected) and TinyLFU admission via a Count-Min Sketch with conservative aging; intra-segment victim/demotion uses LRFU-style decayed scores with k-sampling of the LRU tail ranked by (TinyLFU estimate, decayed score). Includes adaptive window tuning and a scan detector that biases admission/promotion and replacement choices.
- **Performance**: Combined score 0.26 over 48 traces, with hit rates ranging from 0.0000 to 0.8870 (strong on locality-heavy traces, weak on sparse/scan-like workloads).
- **Feedback**: Decayed scoring plus TinyLFU gating preserves hot items and excels on stationary-popularity workloads, but scan suppression and admission thresholds still permit churn, leading to many very low-hit traces. Tighter scan mitigation or more responsive window sizing could reduce pollution and improve consistency.
**Program Identifier:** Generation 38 - Patch Name conservative_sketch_and_window_eviction_fixes - Correct Program: True

**Program Name: LeCaR-blend adaptive LRU/LFU eviction**
- **Implementation**: Blends LRU and LFU experts using multiplicative weights with epsilon-exploration and inverse-probability correction, guided by key-only shadow LRU/LFU caches that simulate each expert’s behavior. Maintains resident LRU via OrderedDict, lightweight global frequency with periodic aging, LFU victim via small tail-sample min-frequency, capacity-scaled aging/sample sizes, deterministic RNG for expert choice, and self-healing of resident metadata.
- **Performance**: Combined score 0.22 over 48 traces, with moderate hits on many traces (≈0.40–0.54) and strong peaks (up to 0.8783), but several near-zero results on challenging/scan-like workloads.
- **Feedback**: The shadow-driven credit assignment and adaptive weighting capture recurring locality well, while approximate LFU sampling and coarse aging keep overhead low. However, exploration and frequency bias can mis-evict under scans or low-locality/tiny-cache traces; tuning age_period, sample_k, or exploration/penalty balance could improve robustness.
**Program Identifier:** Generation 39 - Patch Name lecar_blend - Correct Program: True

# GLOBAL INSIGHTS SCRATCHPAD

The following are global insights about optimization approaches and their effectiveness:

## Successful Algorithmic Patterns
- Windowed TinyLFU + SLRU main with competitive admission delivered the top combined score (0.26): the current best “WTinyLFU-SLRU with LRFU-decayed Scoring” compares f(new) to a sampled cold M1 victim (fallback M2) and evicts the colder of W’s LRU vs M1 when needed. This mirrors prior 0.26-class designs and produced strong locality peaks (trace_28=0.8870, trace_27=0.8183, trace_34=0.7531, trace_38=0.6388) and solid mid-band stability (traces 1–10 ≈0.43–0.54).
- Frequency-aware early promotion and decayed-aware demotion stabilize the main cache: the best program promotes from W on low thresholds (est≥2 or dec≥1.0; stricter under scan) and demotes from M2 using LRFU-decayed scores, retaining hot items without letting protected bloat. Similar “early promotion + controlled demotion” appears in other strong performers.
- Capacity-aware tuning improves robustness: the best program scales sketch aging to ≈cap×8 (bounded), window tuning period ≈cap×4, k-sampling clamped to [4,12], and decayed half-life tied to capacity (8–64). This matches earlier top performers and correlates with better mid-range consistency than many 0.24–0.25 variants.
- Metadata hygiene/self-healing keeps policy and cache aligned: the best program reconciles W/M1/M2 with the snapshot and seeds missing keys, avoiding desync issues that hurt weaker runs.

## Ineffective Approaches
- Over-aggressive scan detectors and conservative admission/bypass thresholds depressed recency and caused near-zero traces: e.g., “Adaptive SLRU with TinyLFU Bias” (0.23) triggers at >2×capacity misses and uses hot-bypass ≥4; “WTinyLFU+ with SLRU and hot-bypass” (0.24) uses high bypass/promotion thresholds with a small default window (20%, W2≈30% of it), yielding many near-zero results on scans and short bursts.
- Heavy LRFU scoring or slow frequency decay retained stale popularity, hurting phase changes: “Hybrid WTinyLFU + SLRU-LRFU Cache” (0.24) and similar hybrids saw several near-zero scan traces; ARC variants with slow decay (~4×cap) and large protected targets preserved outdated history.
- Misconfigured ARC adaptations reduced responsiveness: ARC-style caches constrained with fixed ~80% protected and ghosts bounded to capacity (vs canonical 2×cap) underperformed on scans and shifts (e.g., “ARC-inspired TinyLFU Hybrid Cache” 0.25, “ARC-TinyLFU with sampled LRU eviction” 0.24), despite high isolated peaks (~0.888).

## Implementation Insights
- Why the current best (0.26) is effective:
  - Competitive admission path and lexicographic victim ranking: on W overflow, move W’s LRU to M1 only if f(W_LRU) ≥ f(cold M1) + bias; choose_victim compares f(new) vs sampled cold M1/M2, otherwise picks the colder of W’s LRU and M1 by (TinyLFU estimate, decayed score). This preserves main quality and prevents window pollution.
  - Early promotion with low thresholds plus decayed-aware demotion: promote W hits to M2 at est≥2 or dec≥1.0 (tightened under scan), and cap M2 via demoting the decayed-coldest entry. That keeps protected capacity focused on truly hot sets and explains strong results on locality-heavy traces (28, 34, 38).
  - Capacity-aware parameterization: k-sampling scales with capacity, the CM-sketch ages at ≈cap×8, window tuning period ≈cap×4, and LRFU half-life adapts (8–64). This tuning underpins the mid-band stability seen on traces 1–10 (0.4286–0.5395).
  - Robust OrderedDict LRUs and self-healing: consistent touch semantics and alignment with the external snapshot avoid the metadata desync problems cited in weaker implementations.
- Concrete contrasts tied to performance:
  - Compared to ARC hybrids (0.24–0.25) with fixed ~80% protected and bounded ghosts, the best program’s competitive admission and decayed demotion react faster to shifts, reducing low-end failures even if ARC hits slightly higher isolated peaks.
  - Versus W-TinyLFU variants with hot-bypass gating (0.24), the best program’s lower promotion thresholds and decayed intra-segment ranking reduce under-admission and improve burst handling.

## Performance Analysis
- The best program reached 0.26 combined (top in this batch), with high peaks (trace_28=0.8870; 27=0.8183; 34=0.7531; 38=0.6388) and solid mid-band for traces 1–10 (mostly 0.47–0.54). Its weaknesses remain on scan-like/sparse-reuse workloads (trace_14=0.0000; traces 13–19 ≈0.02–0.06).
- ARC-based hybrids are competitive (0.24–0.25) and sometimes peak slightly higher (e.g., “ARC-inspired TinyLFU Hybrid Cache” up to 0.8884), but average lower due to scan sensitivity and constrained adaptation (fixed protected targets, bounded ghosts, slow decay), leading to many low/near-zero traces.
- W-TinyLFU variants with stricter hot-bypass or smaller/less responsive windows (e.g., “Windowed TinyLFU+ with SLRU and hot-bypass” 0.24) under-admit recency and short-term reuse; even with strong locality peaks (~0.88), the long tail of near-zero traces drags the average below the 0.26 best.
- Learning/blended approaches (e.g., “LeCaR-blend adaptive LRU/LFU eviction” 0.22) showed moderate mid-range results (≈0.40–0.54 on many traces) and strong peaks (up to 0.8783) but suffered several near-zero failures on scans/low-locality workloads, indicating higher variance than the best W-TinyLFU+SLRU design.

# META RECOMMENDATIONS

The following are actionable recommendations for the next program generations:

1. Split the window into W1/W2 (SLRU) with targeted ratios and controlled overflow. Keep W as two OrderedDicts: W1 (probationary) and W2 (protected) with W2_target ≈ 30% of total W. On W1 hit, promote to W2; on W2 overflow, demote its LRU back to W1; on W overflow, evict from W1 first. Retain the existing early-promotion path to M2 (est≥thr_est or dec≥thr_dec) so very hot items skip W churn, which has correlated with the strongest locality peaks in the best program.

2. Make the TinyLFU sketch capacity-aware and adaptively aged. Set width to next power-of-two ≥ max(512, 4×capacity) and d=4 (currently d=3, width fixed) to reduce noise at larger capacities; keep conservative updates. Adapt age_period within [4C, 16C]: move toward 4C when miss_streak is high or hits_w > 1.2×hits_main, and toward 16C when M2 hits dominate (hits_main > 1.2×hits_w). This mirrors the capacity-aware tuning pattern driving mid-band stability in the top design.

3. Dynamically adapt the LRFU half-life and stabilize decayed scoring. Recompute decay_half_life per tune_period within [8, 64]: shorten by 4 when miss_streak > 0.5C or W hits dominate (faster forgetting), lengthen by 4 when M2 hit-share > 70% (preserve hot sets). Normalize decayed scores by clamping a small floor (e.g., min score 1e-4) and decay lazily as already done; use this adjusted score for M2 demotion and lexicographic victim ranking to avoid stale-popularity retention seen in weaker LRFU-heavy variants.

4. Strengthen competitive admission and tie-breaking across segments with two-way sampling and phase bias. In on_insert’s W overflow path, compare W_LRU against the colder of sampled candidates from M1 and M2 (k-sampled from their LRU tails), and admit W_LRU to M1 only if f(W_LRU) ≥ f(cold)+bias (bias+1 for M2). In choose_victim, compare f(new) to min(f(M1_cold), f(M2_cold)+(bias+1)), tie-break by lower decayed score then older age; optionally add a tiny recent-seen ring buffer (size ≈ capacity) that boosts f(new) by +1 on match to accelerate phase shifts. Randomize the k-sample among the LRU tail instead of taking the first k keys to avoid deterministic tail bias.

5. Adapt protected fraction (prot_frac) online using promotion/demotion signals with scan-aware clamps. Each tune_period, if M2 demotions exceed promotions by >20% or M1 hit-share > 60%, decrease prot_frac by 0.05 (min 0.60) to free more probationary space; if M2 hits > 70% and promotions > demotions, increase prot_frac by 0.05 (max 0.90). During scan_cooldown, temporarily reduce prot_frac by an additional 0.05 to keep protected from bloating; this complements early promotion + decayed demotion and improves responsiveness without the heavy-handed scan detectors that hurt weaker runs.