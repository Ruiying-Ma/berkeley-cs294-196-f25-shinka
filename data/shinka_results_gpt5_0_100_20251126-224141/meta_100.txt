# INDIVIDUAL PROGRAM SUMMARIES

The following are summaries of individual programs evaluated since the last meta update:

**Program Name: Access-Count LRU Eviction**
- **Implementation**: Maintains a global key→timestamp map updated on every hit/insert using cache_snapshot.access_count; on eviction, selects the cached key with the smallest timestamp (ties implicitly broken by cache iteration order). Metadata for evicted keys is purged to keep the map in sync.
- **Performance**: Achieved a combined score of 0.21 across 48 traces, with hit rates ranging from 0.0000 to 0.8680.
- **Feedback**: Behavior matches pure LRU—strong on workloads with temporal locality (several mid-to-high hit-rate traces) but weak on scans, large working sets, or frequency-skewed patterns (many near-zero traces). Incorporating frequency/adaptive components (e.g., 2Q/ARC/LRFU) or scan resistance could improve robustness across diverse workloads.
**Program Identifier:** Generation 0 - Patch Name initial_program - Correct Program: True

**Program Name: Adaptive Replacement Cache (ARC)**
- **Implementation**: Uses OrderedDicts for ARC’s T1/T2 (in-cache) and B1/B2 (ghost) lists, with p (target T1 size) initialized to half capacity and bounded to the live cache size. Eviction follows ARC’s replace heuristic (B2 ghost hits bias evicting from T1), hits promote to T2 MRU, inserts go to T1 unless in ghosts (which adjust p), and desync fallbacks promote hits to T2 and place unknown evictions into B1; ghost lists are trimmed to capacity.
- **Performance**: Combined score 0.24 across 48 traces, with hit rates ranging from 0.00 to 0.89 (strong on traces 27/28/34/38, weak on several low-locality/scan traces).
- **Feedback**: Ghost-driven adaptation and p tuning help on mixed recency/frequency workloads but struggle on scan-like or highly unique streams. Integer rounding and default promotion to T2 on desync may over-bias frequency and reduce T1 headroom; gentler p updates or stricter T1 defaults could stabilize performance.
**Program Identifier:** Generation 1 - Patch Name arc_adaptive_recency_frequency - Correct Program: True

**Program Name: 80/20 SLRU-style two-segment cache**
- **Implementation**: Uses per-key last-access timestamps (from access_count) and a two-segment design: new items enter probation, first hit promotes to protected, and an LRU demotion enforces a protected cap at 80% of capacity. Eviction selects the LRU from probation first, otherwise the global LRU; metadata is fully cleaned on evict.
- **Performance**: Combined score 0.23 across 48 traces, with strong hit rates on locality-heavy traces (up to 0.8872) but many traces near zero.
- **Feedback**: The static 80% protected quota and immediate promotion after one hit help reuse-heavy workloads but reduce adaptability, over-protecting items and underperforming on scans/random patterns. Absence of admission control or ghost history limits discrimination between transient and recurring items, leading to many low-hit results.
**Program Identifier:** Generation 2 - Patch Name slru_promotion_with_quota - Correct Program: True

**Program Name: 2Q Segmented LRU with freq tiebreak**
- **Implementation**: Implements a 2Q-style cache with probation (A1) and protected (Am) segments, promoting items to Am on first hit and tracking recency via access_count-based timestamps. Eviction picks a segment targeting ~25% A1, then evicts the segment LRU with frequency as a tiebreaker; metadata is stored in global dicts and cleaned on eviction.
- **Performance**: Combined score 0.23; strong on reusable/looping traces (peaks up to 0.8874) but many traces are low, including some near-zero.
- **Feedback**: The segment choice effectively evicts from A1 even when A1 is below the target, over-protecting Am and harming adaptability to scans/phase shifts; the frequency tiebreak likely rarely activates due to unique timestamps. Correcting the segment-selection branch to truly enforce the A1 target or dynamically sizing segments (e.g., with ghost history) could improve robustness across workloads.
**Program Identifier:** Generation 3 - Patch Name segmented_lru_2q_promotion - Correct Program: True

**Program Name: Simplified ARC with Ghost Sets**
- **Implementation**: ARC-like T1/T2 resident lists and B1/B2 ghost lists with access_count-based LRU; evicts from T1 when T1 exceeds adaptive target p (or on B2 hints), else from T2; hits promote to T2, and p adapts on ghost hits using |B2|/|B1| ratios while pruning ghosts to capacity.
- **Performance**: Combined score 0.24 across 48 traces, with hit rates ranging from 0.00 to 0.89 (strong on several traces, moderate to low on many others).
- **Feedback**: Performs well on workloads mixing recency and frequency, but struggles on scan/low-reuse patterns, exhibiting high variance. Simplifications (always promoting to T2, shared ghost cap, coarse replace rule) likely induce T2 pollution and limit responsiveness to scans.
**Program Identifier:** Generation 4 - Patch Name arc_simplified_segmented_lru - Correct Program: True

**Program Name: ARC-inspired adaptive cache eviction**
- **Implementation**: Implements a simplified ARC using OrderedDicts for T1/T2 (resident) and B1/B2 (ghost) with an adaptive target arc_p; metadata is resynced with the actual cache on eviction and timestamps serve as a fallback tie-breaker. Hits promote keys to T2 MRU, inserts adjust arc_p based on ghost hits, and new keys enter T1; ghost lists are trimmed to capacity.
- **Performance**: Combined score 0.25 over 48 traces; per-trace hit rates ranged from 0.0000 to 0.8915.
- **Feedback**: Strong on workloads with stable recency/frequency (e.g., traces 27, 28, 34, 38) but weak on scan-like or adversarial patterns (many traces below 0.1). Always promoting hits to T2 and capping ghost sizes at capacity may over-bias frequency and dampen adaptability despite consistent metadata via resync.
**Program Identifier:** Generation 5 - Patch Name arc_with_ghost_lists - Correct Program: True

**Program Name: ARC-TinyLFU Hybrid Cache**
- **Implementation**: Combines ARC (OrderedDict-based T1/T2 with ghost lists B1/B2) with a decaying TinyLFU-style frequency sketch and LRU timestamps for tie-breaking. arc_p adapts on ghost hits; eviction compares the LRU of T1 vs T2 using arc_p and per-key frequencies; hits promote to T2, inserts respect ghost membership, and evictions update ghost lists with ghost sizes trimmed to capacity.
- **Performance**: Combined score 0.23 across 48 traces, with hit rates ranging from 0.0 to 0.8864 (strong on traces 27/28/34/38 and moderate ~0.45–0.53 on several, but very low on many others).
- **Feedback**: The ARC plus ghost-based adaptation benefits workloads with recurring locality, but the simplistic frequency sketch and considering only each segment’s LRU as eviction candidates leads to high variance and weak results on low-locality/streaming traces. Tuning admission (e.g., stronger TinyLFU gate), decay cadence, and reducing reliance on periodic resync could improve robustness.
**Program Identifier:** Generation 6 - Patch Name arc_tiny_lfu_hybrid - Correct Program: True

**Program Name: Hybrid ARC-inspired Segmented LRU with Ghosts**
- **Implementation**: Two-tier (A1 probation, Am protected) LRU with per-key timestamps, light frequency counts, and ghost histories (A1/Am) that adapt an A1 target size; eviction selects a segment via the adaptive target and picks the LRU key with frequency as a tiebreaker. Hits promote to protected; inserts adjust the target if ghosts indicate prior residency, and ghost lists are trimmed with a size-bound.
- **Performance**: Combined score 0.23 across 48 traces; hit rates ranged from 0.0000 to 0.8910 (notably ~0.49–0.54 on traces 1–10 and 0.891 on trace_28).
- **Feedback**: Ghost-driven adaptation and first-hit promotion work well on reuse-heavy workloads (e.g., traces 27, 28, 34, 38), but performance collapses on streaming/low-reuse traces (many near-zero results). Strengthening scan resistance/demotion or aging and enriching the frequency signal could reduce protected-set stickiness and improve robustness.
**Program Identifier:** Generation 7 - Patch Name arc_srlu_hybrid - Correct Program: True

**Program Name: Segmented LRU (SLRU) Cache Eviction**
- **Implementation**: Implements SLRU using two sets (probationary/protected) and a global timestamp map updated on each access. Eviction chooses the LRU from probationary, else protected, else global; hits promote to protected and a fixed 0.8 protected cap triggers demotions, with periodic cleanup against current cache keys.
- **Performance**: Combined score 0.23 across 48 traces; hit rates spanned near-zero on scan/low-locality traces to 0.88 on high-locality traces (notably traces 27–28, 34, 38).
- **Feedback**: Shielding benefited stable-reuse workloads, but the static protected ratio and absence of adaptive/ghost admission limited performance under scans and shifting working sets. Linear LRU searches are simple but may be inefficient and less responsive; tuning the protected size or adding adaptive admission could improve robustness.
**Program Identifier:** Generation 8 - Patch Name slru_promotion_with_lru_demote - Correct Program: True

**Program Name: ARC+TinyLFU Hybrid Eviction**
- **Implementation**: Combines ARC (T1/T2 with ghost lists B1/B2 and adaptive target p) with a TinyLFU-style frequency sketch, decayed every 10k accesses, using timestamps as a tie-breaker. Eviction samples up to 3 LRU candidates from T1/T2, prefers ARC’s chosen segment but can override based on frequency gaps; metadata is resynced to the cache and p is adjusted at most once per access.
- **Performance**: Combined score 0.23; hit rates ranged from 0.0000 to 0.8910 across 48 traces.
- **Feedback**: Strong on workloads with recurring locality and frequency skew, but weak on scans or large, sparse working sets. The small sample size (S=3) and relatively slow decay window can misjudge recency/frequency, leading to suboptimal victim selection in volatile patterns.
**Program Identifier:** Generation 9 - Patch Name arc_tinylfu_sampling - Correct Program: True

**Program Name: Hybrid ARC + LFU Aging Cache**
- **Implementation**: Maintains ARC-style resident sets (T1 probationary LRU, T2 protected) and ghost sets (B1/B2) with adaptive target p; replace() evicts from T1 by LRU when T1>p/B2-hit/empty-T2, otherwise from T2 by lowest aged frequency with LRU tiebreaker. T2 uses capped per-key frequencies aged by staleness over a capacity-scaled window; ghost lists are timestamped and pruned to 2×capacity.
- **Performance**: Combined score 0.24 across 48 traces, peaking near 0.89 on locality-heavy traces but dropping near zero on many low-locality/scan-like traces.
- **Feedback**: Adaptive p via ghost hits and LFU-with-aging improves robustness and yields strong gains on reuse-heavy workloads. However, unconditional T1→T2 promotion and conservative aging (window≈capacity/2, no demotion) can overprotect stale items, hurting scans and rapidly shifting patterns.
**Program Identifier:** Generation 10 - Patch Name arc_lfu_hybrid_v2 - Correct Program: True

**Program Name: Adaptive ARC with Delayed Promotion**
- **Implementation**: Simplified ARC maintaining T1/T2 residents and B1/B2 ghosts, with per-key timestamp LRU and replace() evicting from T1 when |T1|>p, when the incoming key is in B2 and |T1|≥p, or when T2 is empty. Adaptive target p starts at capacity/2, adjusts on ghost hits with damped steps, slowly decays without ghost hits and under scan clamp, and uses delayed T2 promotion requiring two hits within a short window.
- **Performance**: Combined score 0.24 across 48 traces; hit rates span 0.0000 to 0.8889 with several mid-0.4–0.5 cases and a few strong (≥0.7) traces.
- **Feedback**: The design adapts well to recurring/frequent reuse, but struggles on scans and sparse or long-gap two-touch patterns. Conservative delayed promotion and ratio-damped p updates likely slow adaptation and underprotect short bursts, yielding very low hits on multiple traces.
**Program Identifier:** Generation 11 - Patch Name arc_adaptive_p_decay_delayed_promotion - Correct Program: True

**Program Name: Hybrid ARC Segmented LRU with Damped Adaptation**
- **Implementation**: ARC-inspired two-tier cache (A1 probation, Am protected) using per-key LRU timestamps with a light frequency tie-breaker and bounded ghost histories (A1/Am) to steer an adaptive A1 target (p). It applies step-limited target updates on ghost hits, delayed promotion via short-window double-hit, scan clamping via a cold-streak heuristic, periodic decay of p, and LRU-within-segment eviction.
- **Performance**: Combined score 0.22 across 48 traces; hit rates span 0.0000–0.8780 with strong results on reuse-heavy traces (e.g., 0.8780, 0.7696, 0.7228, 0.6136) but many low results on scan/one-hit or highly diverse workloads (often ≤0.06).
- **Feedback**: Ghost-guided adaptation and delayed promotion successfully protect reused items, but adaptation can be slow or too conservative under heavy scans/low-locality traces, yielding many near-zero hit rates. Consider more aggressive/dynamic decay, tighter promotion windows, or stronger scan bias when ghost signals are quiet to improve robustness on streaming and long-tail patterns.
**Program Identifier:** Generation 12 - Patch Name arc_srlu_delayed_promo_decay_scanclamp - Correct Program: True

**Program Name: Adaptive Replacement Cache with Ghost Lists**
- **Implementation**: ARC-like eviction choosing LRU from T1 or T2 based on adaptive p and ghost membership, implemented with OrderedDicts (T1/T2 resident, B1/B2 ghost) and timestamp tie-breaks. Hits promote to T2; inserts adjust p on B1/B2 hits; evicted items move to ghosts; metadata resyncs to cache and ghosts are trimmed to capacity.
- **Performance**: Combined score 0.25 over 48 traces; hit rates ranged from 0.0 to 0.8915 with a few strong workloads and many modest/low results.
- **Feedback**: Limited ghost history (ghosts capped at capacity vs. standard 2C) and deferred p-adjustment may weaken adaptation, especially on sequential/adversarial traces. Implementing full ARC REPLACE behavior and 2C ghost sizing could improve stability and hit rates.
**Program Identifier:** Generation 13 - Patch Name arc_pure_plus_resync - Correct Program: True

**Program Name: Adaptive ARC with delayed promotion**
- **Implementation**: Implements an ARC-style cache with T1/T2 residents and B1/B2 ghosts controlled by adaptive parameter p using OrderedDict LRU. Adds delayed promotion via a window W and pending hits, prefers evicting non-pending T1 items, decays p when idle/cold-streaks, trims ghosts, resynchronizes metadata, and falls back to timestamps.
- **Performance**: Combined score 0.24 across 48 traces; strong on locality-rich traces (0.85–0.89) but very low on scans/anti-locality sequences (many <0.1, one 0.0).
- **Feedback**: Delayed promotion reduces pollution but can miss spaced repetitions; p adapts mainly on ghost hits and decays slowly, underreacting to long scans despite the cold-streak clamp. Consider more aggressive scan detection or faster p decay and tuning W to better handle streams without harming frequent reuse.
**Program Identifier:** Generation 14 - Patch Name darc_delayed_promo_scanclamp - Correct Program: True

**Program Name: Hybrid ARC/SLRU/LRFU Cache**
- **Implementation**: Maintains A1 (probationary) and Am (protected) segments with an ARC-like adaptive A1 target driven by ghost histories (B1/B2), cold-streak damping, and time-based decay. Evictions are chosen via an LRFU-like score within the selected segment; promotions require two hits within a capacity-scaled window, and ghost lists are trimmed to max(2×cap, 256).
- **Performance**: Combined score 0.22 across 48 traces; hit rates ranged 0.0000–0.8860, excelling on locality-rich traces and struggling on scan/low-reuse workloads.
- **Feedback**: The LRFU scoring plus delayed promotion effectively protects true hot items, yielding strong results on repeated-access patterns. However, the large ghost minimum and scan clamping can mis-tune the A1 target on streaming traces, producing very low hit rates; consider reducing ghost bounds toward O(cap) and retuning decay/promotion thresholds.
**Program Identifier:** Generation 15 - Patch Name arc_slru_lrfu_hybrid_v2 - Correct Program: True

**Program Name: ARC-based adaptive cache with delayed promotion**
- **Implementation**: Implements an ARC-like policy with T1/T2 resident lists and B1/B2 ghosts, adaptive target p, and LRU-based eviction chosen between T1/T2 based on p and B2 presence, with timestamp fallback. Adds delayed T1→T2 promotion via a pending window, ghost-hit-driven p adjustment, idle decay, cold-streak clamp, metadata resync, and ghosts trimmed to 2x capacity.
- **Performance**: Combined score 0.24 across 48 traces; strong on several looping/reuse traces (peaks ~0.89) but near-zero on many scan/one-timer workloads.
- **Feedback**: Cold-streak and idle-decay both reduce p (despite comments saying “recency”), biasing toward frequency and likely hurting scan resistance; delayed promotion can miss short bursts, reducing mid-frequency hits. Ghost history supports quick adaptation when patterns repeat, explaining the strong results on repetitive traces.
**Program Identifier:** Generation 16 - Patch Name arc_delayed_promotion_damped_p_and_ghost_buffer - Correct Program: True

**Program Name: ARC with delayed promotion and idle decay**
- **Implementation**: Uses ARC with OrderedDict T1/T2 and ghost lists B1/B2, with adaptive target p tuned by ghost hits, idle-time decay, and a scan clamp. Employs delayed T1 promotion via a pending window, metadata resync, and timestamp-based LRU fallback for tie-breaking.
- **Performance**: Combined score 0.24; peaks on strong locality traces (up to 0.8888) but many workloads exhibit low hit rates, including several near-zero.
- **Feedback**: Adaptation benefits frequent/recent reuse, but delayed promotion and conservative p decay likely underreact to short bursts and scans, hurting highly non-repetitive workloads. Consider faster T1→T2 promotion and more aggressive p decay during prolonged cold streaks or sequential access patterns.
**Program Identifier:** Generation 17 - Patch Name arc_delayed_promotion_decay_ghost2x - Correct Program: True

**Program Name: Adaptive SLRU with ARC-style ghosts**
- **Implementation**: Two-segment SLRU (probationary/protected) using per-key access timestamps; promotes on hits and demotes to enforce an adaptive protected target. ARC-style ghost histories (B1/B2) adjust the protected size (±cap//8) and admit ghost hits directly to protected; eviction prefers probationary LRU with protected/global LRU fallbacks, and ghosts are trimmed to ≤2× capacity.
- **Performance**: Combined score 0.21 over 48 traces; hit rates ranged 0.0000–0.8680, strong on locality-heavy traces and weak on scan/random-heavy ones.
- **Feedback**: The SLRU+ghost adaptation shields reused items and rebalances segment sizes effectively, yielding high hits on recurring patterns. Low-reuse traces limit gains; consider tuning the initial protected ratio/step size or enhancing scan-resistance in admission.
**Program Identifier:** Generation 18 - Patch Name arc_slru_ghost_adapt - Correct Program: True

**Program Name: ARCPlus: Adaptive ARC with scan guard**
- **Implementation**: Implements ARC with T1/T2 resident lists and B1/B2 ghost lists via OrderedDict LRU; adapts T1 target p using ghost hits with capped steps, idle-time decay, and a cold-streak scan clamp. Includes resync to cache contents, timestamp tie-breakers, and ghost trimming capped at 2× capacity.
- **Performance**: Combined score 0.24 over 48 traces; hit rates ranged from 0.0 to 0.8934, strong on locality-heavy traces (e.g., 27/28) but weak on many sparse/scan patterns.
- **Feedback**: Aggressive promotion to T2 on any hit and a fallback victim path that can bypass ARC’s T1/T2 preference may bias toward frequency and trigger frequent resyncs, reducing robustness under scans/churn. Tightening eviction to strictly follow T1/T2 LRU and tuning p-decay/scan clamp thresholds could curb near-zero cases while preserving the high-hit scenarios.
**Program Identifier:** Generation 19 - Patch Name arc_plus_simplified - Correct Program: True

**Program Name: ARC-based adaptive cache eviction**
- **Implementation**: Implements Adaptive Replacement Cache using OrderedDicts for T1/T2/B1/B2 with adjustable target p and the ARC REPLACE rule. Adds metadata resync with the real cache, proportional ghost trimming (|B1|≈p, |B2|≈C−p), step-capped p updates, and a timestamp-LRU fallback.
- **Performance**: Combined score 0.24 across 48 traces, with hit rates spanning 0.0000–0.8925.
- **Feedback**: Adapts well on locality-rich/repetitive traces (peaks ~0.85–0.89) but underperforms on low-locality or scan-like workloads (several near-zero traces). The conservative, step-capped p adjustments and cautious ghost trimming may slow responsiveness to phase shifts; faster adaptation or scan detection could improve the weak cases.
**Program Identifier:** Generation 20 - Patch Name arc_strict_p_proportional - Correct Program: True

**Program Name: ARCPlus adaptive cache with ghost tuning**
- **Implementation**: ARC variant with OrderedDict-based T1/T2 (resident) and B1/B2 (ghost) lists, adaptive target p, proportional ghost trimming, idle p-decay, and a scan clamp via cold_streak. Includes metadata resync safeguards and a ghost-informed fallback victim policy with timestamp tie-breaking.
- **Performance**: Combined score 0.24 across 48 traces; hit rates spanned 0.00–0.89, performing strongly on reuse-heavy traces (~0.86–0.89) and weakly on scan-like/sparse workloads.
- **Feedback**: Adaptive p updates and ghost-aware replacement help on mixed/frequent reuse, but aggressive probation and conservative decay leave gaps on long scans or low locality. Resync and B1/B2 balancing improve robustness, yet high variance suggests the need for stronger scan resistance or more dynamic p adjustment.
**Program Identifier:** Generation 21 - Patch Name arc_ghost_proportional_and_invariant_fixes - Correct Program: True

**Program Name: Adaptive Replacement Cache with Ghosts and LRU Fallback**
- **Implementation**: Implements ARC using OrderedDicts for T1/T2 (resident) and B1/B2 (ghost) with ARC’s REPLACE rule, adaptive target p updates bounded by step_cap (≤ C/8), and ghost trimming capped at 2C biased by p. Metadata is continuously resynced with the real cache, can be rebuilt from timestamps, and falls back to a global LRU tie-breaker when needed.
- **Performance**: Combined score to maximize: 0.23; across 48 traces, hit rates ranged from 0.0000 to 0.8874 with several high-locality traces performing strongly (~0.70–0.89).
- **Feedback**: The bounded p adjustments stabilize behavior but slow adaptation to rapid phase changes, contributing to weak performance on scan/low-locality traces (many near-zero hit rates). Frequent resync/rebuild maintains correctness and recoverability, while p-biased ghost trimming prevents ghost explosion but can shorten useful history under churn.
**Program Identifier:** Generation 22 - Patch Name arc_resiliency_improvements - Correct Program: True

**Program Name: ARC-like Cache with Adaptive p and Ghosts**
- **Implementation**: Maintains ARC-style T1/T2 resident sets with per-key LRU timestamps and B1/B2 ghost histories. Eviction follows ARC REPLACE; p adapts on ghost hits with a damped step and scan controls (cold-streak clamp and periodic decay), uses immediate T1→T2 promotion on hits, and keeps ghosts disjoint and pruned to ≤2× capacity.
- **Performance**: Combined score = 0.24; hit rates vary widely (0.00–0.89) across 48 traces with several mid-0.5 results and many near-zero cases.
- **Feedback**: Strong on locality-heavy/repeating workloads (e.g., traces 27/28/34/38) but weak on scans and low-reuse sequences (e.g., 11, 14–19), indicating slow recovery and over-protection of T2. More aggressive scan handling (faster p decrease) or delayed promotion could improve worst-case behavior.
**Program Identifier:** Generation 23 - Patch Name arc_promotion_and_strict_replace - Correct Program: True

**Program Name: ARCPlus adaptive cache with ghost lists**
- **Implementation**: ARC variant using OrderedDicts for T1/T2 (resident) and B1/B2 (ghost) with proportional ghost trimming (≤2C), damped p-adjustment on ghost hits, ARC-style victim choice, unconditional hit promotion to T2, ghost-informed fallback (prefer B1, then not-in-B2, then timestamp), and periodic metadata resync. A p-decay mechanism is defined but never invoked.
- **Performance**: Combined score 0.24 across 48 traces; hit rates range from 0.0 to 0.8925 with solid mid-to-high results on locality-rich traces and many low (<0.1) outcomes on others.
- **Feedback**: Damped p updates and aggressive T2 promotion aid reuse-heavy workloads, but the unused p-decay limits recovery after scans, likely leaving p in suboptimal states. Invoking idle decay and/or tightening probationary admission could improve robustness on scan-heavy or bursty traces; aligning fallback closer to ARC when metadata diverges may further stabilize performance.
**Program Identifier:** Generation 24 - Patch Name arc_simplify_strict_and_gentle_p - Correct Program: True

**Program Name: ARC-based adaptive cache with ghosts and fallback timestamp**
- **Implementation**: Implements an ARC variant using OrderedDicts for T1/T2 (resident) and B1/B2 (ghost) with arc_p-guided replacement (evict from T1 vs T2), immediate promotion on hits, and ghost-hit-driven p adjustments on insert. Includes metadata resync with the real cache, trims ghosts to 2× capacity, and falls back to LRU timestamps when resident lists are empty.
- **Performance**: Combined score 0.24 across 48 traces; hit rates ranged from 0.0000 to 0.8925, with several mid-high (~0.5–0.89) but many low (≤0.1).
- **Feedback**: Strong on locality-rich workloads but struggles on streaming/low-locality traces, yielding mixed results. A defined p-decay mechanism is never invoked and some delayed-promotion state is unused, potentially limiting adaptation and suggesting opportunities for cleanup and tuning.
**Program Identifier:** Generation 25 - Patch Name arc_canonical_stabilize - Correct Program: True

**Program Name: Adaptive Replacement Cache with Ghosts**
- **Implementation**: ARC-style eviction using OrderedDict-backed T1/T2 (resident) and B1/B2 (ghost) lists, with adaptive split parameter p bounded to capacity and ghosts trimmed to 2× capacity targeting |B1|≈p and |B2|≈C−p. Hits promote to T2 MRU; inserts consult ghosts to adjust p with bounded steps; evictions move residents to corresponding ghosts, with timestamp tie-breaker fallback and periodic resync to the actual cache.
- **Performance**: Combined score to maximize: 0.24 across 48 traces; hit rates span 0.0000–0.8925 with strong results on locality-heavy traces.
- **Feedback**: The adaptive recency/frequency balance works well when reuse exists, but aggressive T2 promotion and conservative p adjustments likely hurt scan-resistance and slow adaptation, leading to many low-hit traces. Resynchronization and ghost-size targeting add stability but may bias T1 when metadata drifts.
**Program Identifier:** Generation 26 - Patch Name arc_refine_p_ghosts_disjoint - Correct Program: True

**Program Name: ARCPlus: Adaptive ARC with ghost-driven tuning**
- **Implementation**: Uses OrderedDicts for ARC lists (T1/T2 and ghost B1/B2), adaptively tunes target p via ghost hits with damped steps, idle decay, and a scan-clamp; includes proportional ghost trimming, ghost-aware victim selection with timestamp tie-breakers, and resync guards to keep metadata consistent.
- **Performance**: Combined score 0.24 across 48 traces, with hit rates ranging from 0.00 to 0.89 (strong on several high-locality traces, weak on many scan-like workloads).
- **Feedback**: Ghost-informed adaptation and scan/idle safeguards produce solid results on repetitive/frequent patterns, but numerous very low hit rates indicate p-adaptation and immediate T2 promotions can still mis-handle cold streams or shifting locality. Consistency/resync logic preserves correctness, though behavior suggests tuning sensitivity and global-state dynamics may hinder stable performance across diverse traces.
**Program Identifier:** Generation 27 - Patch Name arc_p_decay_and_scan_clamp - Correct Program: True

**Program Name: ARC with adaptive p and ghost trimming**
- **Implementation**: Implements ARC using OrderedDicts for T1/T2 (residents) and B1/B2 (ghosts), with MRU updates and LRU eviction; maintains an adaptive target p (initialized at ~0.5C) updated on ghost hits with step-capped, ratio-based adjustments. Includes robust resync to actual cache state and keeps ghosts disjoint and bounded (≤2C) via proportional trimming toward |B1|≈p and |B2|≈C−p.
- **Performance**: Combined score 0.24 over 48 traces; strong on locality-heavy workloads (peaks up to 0.8906) but weak on scan-like/adversarial traces (several near 0).
- **Feedback**: The step-capped adaptation and half-capacity p initialization can slow responsiveness, and promoting unknown hits directly to T2 may overfavor frequency, hurting recency-sensitive/scan workloads. Proportional ghost trimming (vs. canonical ARC’s precise replace dynamics) may further reduce adaptation sharpness, contributing to uneven performance.
**Program Identifier:** Generation 28 - Patch Name arc_resync_proportional_ghosts_strict_replace - Correct Program: True

**Program Name: LRU-2 with CRP history**
- **Implementation**: Implements LRU-K (K=2) with a correlated reference period (CRP), maintaining per-key (last_ts, prev_ts) and only promoting distinct references when spaced by a CRP window derived from capacity (cap//16); histories persist across evictions and are pruned to ~16x capacity. Eviction selects the key maximizing (is_cold, now−prev, now−last), prioritizing cold items, then largest backward 2-distance, then older last reference.
- **Performance**: Combined score 0.24 over 48 traces; hit rates range 0.0000–0.8942 with strong results on traces 27/28/34/38 and weak/near-zero on several others.
- **Feedback**: Effectively filters one-hit wonders and favors proven reuse, boosting recurring workloads; it struggles on scans or sparse-reuse traces where few items get a second distinct reference. The CRP window tied to capacity may be mis-sized for some workloads; tuning CRP or admission could improve stability on low-hit traces.
**Program Identifier:** Generation 29 - Patch Name lruk2_crp - Correct Program: True

**Program Name: ARC+aged-LFU with proportional ghosts**
- **Implementation**: ARC variant with T1/T2 resident sets and B1/B2 ghosts (bounded to 2×capacity) maintaining strict disjointness/invariants via resync. Eviction uses ARC REPLACE to choose T1 LRU or T2 victim by aged-LFU (freq with time-decay), with p adjusted asymmetrically on B1/B2 hits and proportional ghost trimming around p.
- **Performance**: Combined score 0.23 across 48 traces; hit rates span 0.0000–0.8451 with strong results on locality-heavy traces (e.g., 27/28/34/38) and many low/near-zero cases.
- **Feedback**: Proportional ghost control and C/8-bounded p updates stabilize behavior but can under-adapt to abrupt phase changes, explaining poor streaming/scan traces (e.g., 14, 32). Aged-LFU in T2 effectively protects frequent items when locality exists, while strict resync/ghost disjointness safeguards correctness.
**Program Identifier:** Generation 30 - Patch Name arc_lfu_plus - Correct Program: True

**Program Name: Adaptive ARC with Ghost History**
- **Implementation**: ARC-style eviction using OrderedDict-backed T1/T2 (resident) and B1/B2 (ghost) lists with adaptive target p and an idle-decay heuristic; eviction picks LRU from T1 or T2 based on p, with timestamp fallback, and metadata resync plus ghost trimming keep structures bounded and consistent. Hits promote to T2 MRU; inserts adjust p on ghost hits and place new items in T1.
- **Performance**: Combined score 0.25 over 48 traces, with hit rates ranging 0.0000–0.8922 (notably strong on traces 27, 28, 34, 38 but weak on many others).
- **Feedback**: The ghost-guided p adaptation and scan-recovery help when locality exists, but reliance on resync/timestamp fallback and omission of a full ARC replacement routine likely reduced robustness on scan-heavy or long-tail workloads. Balancing between T1/T2 at eviction time could improve consistency across diverse traces.
**Program Identifier:** Generation 31 - Patch Name arc_hybrid_decay - Correct Program: True

**Program Name: ARC with LFU sampling and aging**
- **Implementation**: Combines Adaptive Replacement Cache (ARC: T1/T2 with B1/B2 ghosts and adaptive p) with LFU-based victim choice by sampling the k oldest entries and evicting the lowest-frequency item; frequencies are aged by periodic halving, with timestamp fallback, ghost trimming, and metadata resync. p is adjusted on ghost hits with bounded steps to prevent overshoot.
- **Performance**: Combined score 0.24 across 48 traces; mid-range hits (~0.44–0.54) on several, very high on a few (up to 0.8927), but many traces are low (near 0–0.1).
- **Feedback**: The ARC+LFU blend helps on mixed recency/frequency and repeated working sets, but struggles on short or rapidly shifting/scan-like traces—likely due to slow aging (min 1000 accesses) and limited sampling (k ≤ 8). Tuning AGE_INTERVAL_FACTOR, increasing/adapting sample_k, and adhering more closely to ARC’s replace policy could reduce worst-case drops.
**Program Identifier:** Generation 32 - Patch Name arc_lfu_sample_protected - Correct Program: True

**Program Name: ARC+LFU Hybrid Cache Eviction**
- **Implementation**: Implements Adaptive Replacement Cache (ARC) with T1/T2 resident lists, B1/B2 ghost lists, and adaptive target p, augmented by lightweight LFU counters with periodic aging and timestamp tie-breaks. Eviction samples among the k oldest entries of the chosen list (min(16, max(2, C/8))) selecting the lowest-frequency key; metadata resync and ghost trimming keep structures consistent and bounded.
- **Performance**: Combined score 0.25 over 48 traces, with hit rates ranging from 0.0 to 0.8927 (strong peaks on traces 27–28, but many traces below 0.1).
- **Feedback**: The ARC core plus LFU-sampled eviction improves results on mixed recency/frequency workloads with stable reuse, reflected in high-hit traces. However, conservative p-adjustment and slow frequency aging reduce responsiveness, leading to collapses on scan/phase-shift workloads; automatic resync that seeds missing keys into T1 may further bias eviction under drift.
**Program Identifier:** Generation 33 - Patch Name arc_lfu_tuning_and_selective_freq - Correct Program: True

**Program Name: Adaptive ARC with Delayed Promotion**
- **Implementation**: Implements an ARC variant using OrderedDicts for T1/T2 and ghost lists (B1/B2), adaptive p updates bounded by step caps, delayed promotion from T1 to T2 via a short pending window, ghost-list trimming to 2x capacity proportional to p, periodic p decay when idle, and a cold-streak clamp that biases toward recency. Metadata is resynced with the cache snapshot and kept disjoint across resident and ghost lists.
- **Performance**: Combined score 0.24 across 48 traces, with per-trace hit rates ranging from 0.0 to 0.885 (strong on several locality-rich traces but weak on many others).
- **Feedback**: The delayed promotion and conservative p adjustments help avoid over-promoting bursts, yielding strong results on frequency/recency mixed workloads, but many traces show low hit rates, suggesting under-promotion of moderately hot items and insufficient scan resistance. The idle decay and cold-streak clamp mitigate scans somewhat but may still leave T1/T2 mis-sized for highly dynamic or adversarial patterns.
**Program Identifier:** Generation 34 - Patch Name arc_strict_replace_proportional_ghosts - Correct Program: True

**Program Name: ARC with idle decay and ghost-aware adaptation**
- **Implementation**: Implements Adaptive Replacement Cache with OrderedDict-backed T1/T2 (resident) and B1/B2 (ghost) lists, adjusting arc_p on B1/B2 ghost hits, decaying p when idle, clamping on cold streaks, trimming ghosts to 2x capacity, and using timestamp LRU as a fallback. Hits promote to T2; eviction follows ARC’s T1 vs T2 choice with periodic resync to actual cache contents.
- **Performance**: Combined score 0.24 across 48 traces, strong on reuse-heavy traces (up to 0.8925) but weak on scan-like patterns (as low as 0.0000).
- **Feedback**: ARC core is implemented coherently, and extra controls (idle decay, cold-streak clamp) aim to mitigate scans but still underperform on several traces, suggesting adaptation may be too slow or promotions too aggressive. Unused/rarely used state (e.g., t1_pending) indicates some complexity without clear benefit.
**Program Identifier:** Generation 35 - Patch Name arc_p_decay_and_cold_scan_clamp - Correct Program: True

**Program Name: ARC with adaptive ghosts and idle decay**
- **Implementation**: Implements an ARC-based policy using OrderedDicts for T1/T2 (resident) and B1/B2 (ghosts), with dynamic p updated on ghost hits, idle-time decay toward recency, and a cold-streak scan clamp. Eviction follows ARC’s T1/T2 choice with LRU ordering and a timestamped fallback; ghosts are trimmed to 2×capacity proportionally to p, and a resync step keeps metadata aligned with the cache.
- **Performance**: Combined score 0.25 over 48 traces, with strong hit rates on several reuse-heavy traces (up to 0.8908) but many low-hit traces.
- **Feedback**: Adaptive p and ghost learning benefit frequent/mixed workloads, while scan clamp and idle decay add some scan resilience but still struggle on streaming or tiny-reuse patterns; the program passes all validation tests. Minor drift (necessitating resync) and unused metadata (e.g., t1_pending) suggest opportunities to refine promotion timing and scan detection.
**Program Identifier:** Generation 36 - Patch Name arc_pure_promotion_and_gentler_cold_bias - Correct Program: True

**Program Name: ARC with LFU-aged Sampling Eviction**
- **Implementation**: Implements ARC with T1/T2 resident lists and B1/B2 ghost lists using OrderedDicts, adapting arc_p via ratio-based, step-capped adjustments. Eviction samples the k oldest in T1/T2 and chooses the lowest LFU (with periodic halving) and timestamp tie-breaks, includes cross-list overrides, ghost trimming to 2×capacity, and periodic metadata resync.
- **Performance**: Combined score 0.24 across 48 traces; strong on traces 27/28/34/38 (0.63–0.89) but many low-locality traces are ≤0.12, including one at 0.0.
- **Feedback**: LFU-aware sampling improves frequent-reuse workloads but can over-retain stale items under scans/churn, hurting scan-heavy traces. Faster frequency aging or a fallback to pure ARC when ghost signals indicate scanning could improve robustness.
**Program Identifier:** Generation 37 - Patch Name arc_lfu_crosslist_selection - Correct Program: True

**Program Name: ARC-based adaptive cache eviction**
- **Implementation**: Implements an ARC variant using OrderedDicts for T1/T2 (resident) and B1/B2 (ghost), evicting the LRU of the chosen list based on the ARC replacement rule with ghost-aware and timestamp fallbacks. arc_p is adaptively tuned with bounded step sizes, ghosts are trimmed to capacity, metadata is resynced with the cache on drift, and an idle-driven decay of p aims to improve scan resistance.
- **Performance**: Combined score 0.25 over 48 traces; strong on locality-rich traces (e.g., 0.86–0.89 on 27–28, 0.75 on 34) but many traces show very low hit rates (<0.1, including one at 0.0).
- **Feedback**: ARC mechanics and ghost-informed fallbacks work well for mixed recency/frequency workloads, but scan-heavy or adversarial patterns still degrade performance, suggesting idle decay and conservative arc_p adjustments are too mild. Consider more aggressive p adaptation on B1/B2 hits and improved handling of one-time scans/cyclic patterns to reduce thrashing.
**Program Identifier:** Generation 38 - Patch Name arc_strict_replace_bounded_p_and_ghost_fallback - Correct Program: True

**Program Name: Adaptive ARC with Ghost Decay Clamp**
- **Implementation**: Implements Adaptive Replacement Cache using OrderedDict-backed T1/T2 (resident) and B1/B2 (ghost) lists, with eviction chosen between T1 and T2 based on arc_p and B2 membership. arc_p adapts via ghost hits with bounded steps, decays when idle, and a streaming-aware cold_streak clamp biases to recency; ghosts are trimmed to 2× capacity and metadata is resynced defensively.
- **Performance**: Combined score 0.25; per-trace hit rates ranged from 0.0 to 0.8908, strong on repetitive/looping traces (27, 28, 34, 38) but weak on streaming/one-hit patterns.
- **Feedback**: The adaptive arc_p and ghost-feedback effectively capture frequency, yet several near-zero traces indicate scan detection/recency bias is still insufficient under heavy streaming. t1_pending and timestamps are maintained but largely unused for decisions, suggesting missed signals despite robust resync and ghost trimming ensuring correctness.
**Program Identifier:** Generation 39 - Patch Name arc_stream_clamp_and_strict_replace - Correct Program: True

**Program Name: ARC variant with LFU and scan clamp**
- **Implementation**: Simplified ARC with resident T1/T2 and ghost B1/B2, adaptive target p adjusted by ghost hits and a cold-streak scan clamp; eviction chooses a segment via ARC REPLACE then picks a victim by LFU-with-decay then LRU. Includes a lightweight frequency sketch with periodic halving, timestamped recency, and ghost pruning to 2×capacity while keeping ghosts disjoint from residents.
- **Performance**: Combined score 0.24 over 48 traces, with hit rates spanning 0.00–0.89 (strong on repetitive/locality-heavy traces, many low scores on others).
- **Feedback**: The LFU-LRU hybrid within ARC helps repeated/bursty reuse, but immediate promotion and cautious p adjustments under cold streaks appear to over-protect, hurting scans and rapidly shifting workloads. Consider true delayed promotion, more aggressive p retreat during cold phases, or tuning decay/ghost sizing to improve scan resistance and adaptability.
**Program Identifier:** Generation 40 - Patch Name arc_hybrid_lfu_scanaware - Correct Program: True

**Program Name: ARC+ with Ghost Hints and Scan-Awareness**
- **Implementation**: ARC-derived design with resident T1/T2 and ghost B1/B2, an adaptive target p (idle decay, scan clamps), ghost-biased ghost pruning, and ghost-hinted victim selection prioritized by ghost rank, then a decaying frequency sketch, then timestamps. Hits promote to T2; cold streaks trigger probationary inserts (forced LRU) and optional T2→T1 demotion.
- **Performance**: Combined score 0.23 across 48 traces, with hit rates ranging 0.0000–0.8934 (strong on locality-heavy traces like 27/28/34/38, weak on scan/uniform workloads).
- **Feedback**: Ghost-aware picking and adaptive p improved re-reference capture and balanced recency/frequency; the decaying frequency sketch stabilized tie-breaking. However, aggressive scan clamps and demotions can shrink T1 excessively and over-evict under long scans or highly diverse accesses, causing near-zero hit rates on several traces.
**Program Identifier:** Generation 41 - Patch Name arc_plus_scanaware_ghosthint - Correct Program: True

**Program Name: Adaptive ARC with LFU-LRU and scan defense**
- **Implementation**: Implements a simplified ARC with resident T1/T2 and ghost B1/B2 sets, adapting target p via ghost hits plus a cold-streak scan clamp. Eviction uses hybrid LFU-LRU with a decaying frequency sketch, two-hit delayed promotion to T2, periodic demotion of weak T2 under scans, and ghost lists pruned to 2×capacity.
- **Performance**: Combined score 0.24; hit rates span from near 0 to 0.89, excelling on skewed/repetitive traces (e.g., 0.8352, 0.8900, 0.7246, 0.6347) but weak on scan/large-working-set traces.
- **Feedback**: Frequency-aware eviction and ghost-driven p adaptation work well on locality-rich workloads, but heavy streams and large working sets defeat protections despite scan clamps. Consider tuning p step sizes, promotion window, and demotion thresholds to reduce over-demotion and improve responsiveness during scans.
**Program Identifier:** Generation 42 - Patch Name arc_two_hit_promotion_and_scan_demote - Correct Program: True

**Program Name: ARC with scan-aware ghost tuning**
- **Implementation**: ARC variant using OrderedDicts for T1/T2 (resident) and B1/B2 (ghosts), adapting arc_p via ghost hits with capped step sizes, scan detection (cold_streak) that inserts at LRU, and idle p decay; metadata is resynced to cache contents, ghosts are trimmed to capacity, and a timestamp map is used for tie-breaking. Eviction selects LRU from T1 or T2 per arc_p, with ghost- and timestamp-informed fallbacks.
- **Performance**: Combined score 0.25 across 48 traces, with strong hit rates on reuse-heavy traces (e.g., 27=0.858, 28=0.892, 34=0.767, 38=0.640) but many low-hit cases (e.g., 14=0.000, 15–19≈0.02).
- **Feedback**: Scan-aware probation and capped p adjustments help frequent/reuse workloads, but constrained ghost history (B1+B2 capped at capacity) and aggressive p decay during cold streaks likely hurt scans/large working sets, producing many near-zero traces. Consider allowing larger ghost history (toward 2×capacity), softening p decay, and tuning stream thresholds to reduce overreaction.
**Program Identifier:** Generation 43 - Patch Name arc_scan_aware_ghost_bias - Correct Program: True

**Program Name: ARC with scan-aware adaptive recency/frequency**
- **Implementation**: Implements ARC using OrderedDicts for T1/T2 and ghost lists B1/B2, with online p adaptation driven by ghost hits. Adds scan-aware features: idle p decay, cold-streak detection that inserts at T1 LRU and demotes T2 LRUs, plus a ghost-informed eviction fallback; ghost lists are capacity-bounded and metadata is kept disjoint.
- **Performance**: Combined score 0.24; strong on locality-heavy traces (e.g., 0.86–0.89 on 27–28, 0.77 on 34, 0.64 on 38) but poor/near-zero on many streaming/sparse traces (e.g., 13–19, 14=0.00).
- **Feedback**: ARC core is correct and adaptive, and scan defenses help in places, but many traces still degrade to low hit rates. Tuning p update caps and the cold-streak demotion/probation policy (and possibly tempering aggressive promotion to T2) could improve robustness under scans without sacrificing frequent-item protection.
**Program Identifier:** Generation 44 - Patch Name arc_scan_aware_p_adapt - Correct Program: True

**Program Name: Scan-Guarded SLRU with TinyLFU and Ghost Tuning**
- **Implementation**: SLRU with window/probation/protected segments and ghost sets (Gp/Gq) adapt the window size; TinyLFU-like decaying counts inform a hybrid victim choice (lowest frequency then LRU), with scan-guarded insertions and direct protection on ghost hits. Idle drift recenters the window target toward a baseline when ghost activity is quiet, and ghosts are pruned to 2×capacity with side bias.
- **Performance**: Combined score 0.25 across 48 traces; hit rates ranged 0.0–0.8886, strong on locality-heavy traces (e.g., 27–28, 34, 38) and weak on scan/no-reuse workloads.
- **Feedback**: Ghost-driven window tuning and TinyLFU preserved frequent items, delivering high peaks, but scan-guard thresholds and direct-to-protected on ghost hits can overprotect Q and under-serve recency during streams, causing collapses on purely cold workloads. More aggressive scan detection or faster window shrink could improve robustness on streaming traces.
**Program Identifier:** Generation 45 - Patch Name s3q_scan_guard_slru - Correct Program: True

**Program Name: Adaptive ARC with delayed promotion**
- **Implementation**: Implements an ARC-style cache with T1/T2 resident lists and B1/B2 ghosts, adaptive target p, ghost trimming, and biased LRU victim selection; adds delayed T1→T2 promotion via a pending window, idle/ghost-hit-based p updates, and a cold-streak “streaming clamp” that demotes some T2 items to T1.
- **Performance**: Combined score 0.23 across 48 traces with wide variance (per-trace hit rates range from 0.00 to 0.87).
- **Feedback**: Strong on workloads with clear reuse/frequency signals, but many traces underperform, likely due to inverted p adjustments on idle/streaming (decreasing p favors frequency, contrary to the intended “recency” bias) and a tight promotion window that under-recognizes moderate reuse. These heuristics can over-penalize recency during scans and cause oscillation, explaining the mixed results.
**Program Identifier:** Generation 46 - Patch Name arc_scan_aware_bias_and_adaptive_p - Correct Program: True

**Program Name: ARC with scan-aware adaptations**
- **Implementation**: Implements an ARC variant with T1/T2 resident sets and B1/B2 ghost lists, adaptive target p, idle-based decay, and scan detection via a cold_streak that inserts at LRU and demotes T2 during scans. Eviction selects T1/T2 LRU based on p and ghost hints (with early T1 bias under scans), trims ghosts to 2×capacity, resyncs metadata with the cache, and uses timestamp tie-breakers.
- **Performance**: Combined score 0.24 over 48 traces; hit rates ranged 0.0000–0.8934 with strong results on locality-heavy traces and collapses on several others.
- **Feedback**: Scan handling and p-capping help avoid frequency lock-in, but aggressive cold_streak thresholds and demotions can cause T1/T2 churn, yielding very low hit rates on some patterns. Retuning p adjustments and scan thresholds could smooth the sharp drops while preserving the high peaks.
**Program Identifier:** Generation 47 - Patch Name arc_scan_aware_ghost_proportional - Correct Program: True

**Program Name: ARC-S3: Scan-guarded ARC with TinyLFU**
- **Implementation**: Implements an ARC variant using OrderedDicts for T1/T2 residents and B1/B2 ghosts, with adaptive target p updated via ghost hits (asymmetric caps, ceiling ratios) and idle drift toward a baseline. Eviction follows ARC REPLACE, then picks within-segment victims from an LRU-side window using a decaying TinyLFU score with timestamp tie-breaks; includes scan defense (LRU insertion plus limited T2 demotion), ghost-aware resynchronization, and bounded ghost trimming.
- **Performance**: Combined score 0.22 over 48 traces (passes validation), with hit rates from 0.0000 to 0.8831 and strong results on traces 27, 28, 34, and 38.
- **Feedback**: The scan guard and TinyLFU windowing help on repetitive/skewed workloads, but many traces show very low hit rates, suggesting T2 demotion and p drift may overreact and sacrifice short-term recency. Tuning decay period, demotion amount, victim window size, and ghost limits could improve stability on churny or low-locality workloads.
**Program Identifier:** Generation 48 - Patch Name arc_s3_scan_guarded_tinylfu - Correct Program: True

**Program Name: ARC-based adaptive cache with scan and ghost bias**
- **Implementation**: Implements ARC with OrderedDict-backed T1/T2 (resident) and B1/B2 (ghost) lists, adaptive target p, and eviction choosing LRU from T1 or T2 based on p and B2 membership. Adds scan-aware probationary insertion and T2-to-T1 demotion, idle-time p decay, proportional ghost trimming with a short bias window, and robust resync that seeds residents from ghost hints.
- **Performance**: Combined score 0.23 across 48 traces, ranging from strong locality cases (up to 0.8874) to poor streaming-like cases (down to 0.0000).
- **Feedback**: The adaptive p updates, ghost-bias trimming, and scan-aware handling boost performance on multi-phase and frequent-reuse workloads, reflected in top decile traces. However, long runs of novel keys still degrade hit rates despite cold-streak handling, suggesting further tuning of stream detection or more aggressive bypass/clamping during heavy diversity.
**Program Identifier:** Generation 49 - Patch Name arc_scanaware_plus - Correct Program: True

**Program Name: ARC-style cache with idle-decay and scan heuristics**
- **Implementation**: Uses OrderedDict-based ARC (T1/T2 resident, B1/B2 ghost) with p adjusted on ghost hits and decayed when idle; eviction selects LRU from T1 or T2 per ARC rules with timestamp fallback and periodic metadata resync. Ghost lists are capped at 2×capacity, and a cold_streak scan clamp exists but is effectively a no-op; some metadata (t1_pending) is unused.
- **Performance**: Combined score 0.25 across 48 traces, peaking at 0.8908 (traces 27–28) but dropping to near 0 on scan-like workloads (e.g., trace_14=0.0).
- **Feedback**: Ghost-hit adaptation and idle decay help on locality-rich, multiphase workloads, but responsiveness to scans appears weak, likely due to the disabled scan clamp and possibly oversized ghost sets. Enabling the clamp to adjust p during long cold streaks and right-sizing ghost capacity could improve low-end performance while preserving strong cases.
**Program Identifier:** Generation 50 - Patch Name arc_move_p_update_to_evict_with_scan_bias - Correct Program: True

**Program Name: ARC with scan-guard and idle-decay**
- **Implementation**: ARC-style cache using OrderedDicts for T1/T2 (resident) and B1/B2 (ghosts), with ghost-hit driven tuning of p, proportional ghost trimming, and resync to actual cache; adds cold-streak scan detection to bias eviction to T1 and decays p when ghost hits are idle. Eviction selects LRU from T1/T2 per p (with scan bias and bounded fallbacks); hits move T1→T2 and ghost hits admit to T2.
- **Performance**: Combined score 0.25 across 48 traces (hit rates 0.00–0.8908); passes all validation tests.
- **Feedback**: Strong on mixed recency/frequency and looping traces but weak on long scans and sparse workloads, indicating scan-guard and p-decay/clamps only partially mitigate streaming. Some metadata (e.g., t1_pending, timestamp tie-breaker) is underutilized, suggesting potential headroom for stricter tie-breaking and promotion policies.
**Program Identifier:** Generation 51 - Patch Name arc_pre_replace_ghost_adapt_scan_guard - Correct Program: True

**Program Name: Adaptive ARC with LFU Sampling and Scan Guard**
- **Implementation**: Implements ARC with T1/T2/B1/B2 using OrderedDicts and adaptive target p, selecting eviction via LFU-on-LRU sampling (k oldest, frequency with timestamp tie-break), with periodic LFU aging, idle p-decay, a short scan-guard that biases REPLACE toward T1 and demotes some T2, ghost trimming to 2×capacity, and defensive resync with the actual cache.
- **Performance**: Combined score 0.23 across 48 traces; hit rates ranged 0.00–0.89, strong on locality-heavy traces (e.g., 27–28, 34, 38) and weak on long-tail/streaming ones; passes all validations.
- **Feedback**: The ARC+LFU hybrid improves reuse detection and mitigates some thrash, but high variance suggests p-adaptation and the scan guard are not stabilizing enough under sparse or shifting workloads. Tuning aging cadence/sample size and strengthening admission/bypass for scans could reduce pollution and improve low-performing traces.
**Program Identifier:** Generation 52 - Patch Name arc_lfu_scan_guard_v2 - Correct Program: True

**Program Name: Adaptive Replacement Cache with idle-decay**
- **Implementation**: ARC-style eviction using OrderedDicts for T1/T2 (resident) and B1/B2 (ghost), with p adjusted on ghost hits (step capped by cap//8); eviction selects the LRU from T1 or T2 per p, with ghost-informed and timestamp fallbacks. Metadata is resynced to the actual cache, ghosts are trimmed to 2x capacity with p-biased trimming, and an idle-driven decay reduces p over time.
- **Performance**: Combined score 0.24 across 48 traces with hit rates ranging from 0.0000 to 0.8935.
- **Feedback**: The design delivers strong results on temporal/frequent workloads but struggles on scan/adversarial traces, suggesting the idle p-decay and fallback logic may over-bias toward frequency. Consider revisiting the decay direction/step and enforcing ARC REPLACE more strictly to better handle recency bursts.
**Program Identifier:** Generation 53 - Patch Name arc_p_in_evict_2C_ghosts_scan_decay - Correct Program: True

**Program Name: S3Q SLRU with TinyLFU and Ghosts**
- **Implementation**: Three resident segments (W/P/Q) plus ghost sets (Gp/Gq), with an adaptive window target (m_target_p) adjusted by ghost hits and clamped to [cap/64, cap/2]. Eviction demotes overflowed W/Q into P, applies ghost-biased victim ordering, and selects victims by TinyLFU-decayed frequency then LRU; inserts are scan-guarded (cold streaks go to P) and ghost hits promote directly to Q.
- **Performance**: Combined score 0.0; the program is incorrect and fails validation tests.
- **Feedback**: Partial enforcement of segment budgets (demoting only up to two per call), aggressive ghost-driven window resizing, and lingering frequency counts for evicted keys likely cause unstable or inconsistent victim selection and break invariants required by tests. Enforcing exact segment targets per eviction, clearing frequency on eviction, and tempering the adaptation/scan-guard thresholds would improve correctness and stability.
**Program Identifier:** Generation 54 - Patch Name slru_q_demotion_pre_replace - Correct Program: False

**Program Name: Adaptive ARC with scan-aware tweaks**
- **Implementation**: Implements an ARC-based eviction policy with T1/T2 residents and B1/B2 ghost lists, adapting the T1 target (arc_p) on ghost hits and decaying it when idle. Adds scan detection via cold_streak and a scan_guard window to bias evictions toward T1, demotes a few T2 LRUs during scans, resyncs metadata with cache contents, and uses ghost-informed/timestamp fallbacks.
- **Performance**: Combined score 0.24, achieving up to 0.8935 on some traces but many traces fall in the 0.00–0.07 range.
- **Feedback**: Heuristics boost reuse-heavy/bursty workloads (e.g., traces 27–28, 34, 38) but produce volatile results and low hit rates on mixed or long-scan workloads. Aggressive scan biasing, T2 demotions, and arc_p decay likely over-evict frequent items, increasing churn across many traces.
**Program Identifier:** Generation 55 - Patch Name arc_eviction_preupdate_scan_guard - Correct Program: True

**Program Name: SLRU+TinyLFU with ghost adaptation**
- **Implementation**: Two SLRU segments (probation/protected) with ARC-style ghost lists (B1/B2) adapt the protected target q; eviction picks the LFU among the k oldest via TinyLFU counters with periodic halving and timestamp tie-breaks. Metadata is kept consistent via resync and ghost trimming, with a guard to avoid double adaptation between evict/insert.
- **Performance**: Combined score 0.22; strong on locality-heavy traces (up to 0.8819) but weak on streaming/adversarial workloads (several near 0.01 and one 0.0000).
- **Feedback**: Ghost-driven q effectively balances recency/frequency for mixed workloads, and LFU sampling among LRU reduces thrash. Aging every max(500, 4×C) can retain stale frequencies in small/short traces, contributing to poor scan performance; consider tighter aging or more aggressive probation/ghost tuning.
**Program Identifier:** Generation 56 - Patch Name slru_tiny_age - Correct Program: True

**Program Name: ARC with scan-guard and delayed promotion**
- **Implementation**: Implements an ARC variant with T1/T2 resident and B1/B2 ghost lists, adaptive target p, delayed promotion to T2 via a second-hit window, and bounded miniscan victim selection using timestamps. Adds scan-aware heuristics (cold_streak, scan_guard), idle decay/clamping of p, and maintains metadata consistency with resync and proportional ghost trimming.
- **Performance**: Combined score 0.22 across 48 traces, with hit rates spanning 0.0000–0.8858 (strong on some repetitive/frequent workloads, very weak on several traces).
- **Feedback**: Delayed promotion and miniscan improve frequency protection, but aggressive p reductions during cold streaks and the second-hit requirement can hurt short-term recency/bursty locality, leading to near-zero hit rates on adversarial or highly diverse traces. Scan-guard demotions may over-bias eviction toward T1, occasionally starving T2 and destabilizing adaptation.
**Program Identifier:** Generation 57 - Patch Name arc_mini_scan_guard_demote - Correct Program: True

**Program Name: SLRU-TinyLFU Cache Eviction**
- **Implementation**: Two-segment SLRU (probation/protected) using OrderedDict MRU/LRU with protected ~80% of capacity. Eviction samples 2–8 LRU-side probation keys and removes the one with the lowest TinyLFU estimate (4-row Count-Min Sketch with capacity-scaled power-of-two width and periodic halving), using timestamps for tie-breaks and resync to track cache drift.
- **Performance**: Combined score 0.24 over 48 traces, with hit rates up to 0.890 (trace 28) but many very low or near zero on others.
- **Feedback**: Strong on skewed/repetitive workloads but weak on scans and rapidly shifting popularity, likely due to the 80/20 split and small probation sample limiting adaptivity. CMS decay scaled to width/capacity may preserve stale counts; timestamp fallback and resync improve robustness but don’t fully address dynamic workloads.
**Program Identifier:** Generation 58 - Patch Name slru_tinylfu - Correct Program: True

**Program Name: Adaptive ARC with scan guard and idle decay**
- **Implementation**: Implements an Adaptive Replacement Cache (ARC) using OrderedDicts for T1/T2/B1/B2 with adaptive p updated by ghost hits, scan detection via cold_streak, a temporary scan_guard that biases REPLACE to evict from T1, and LRU insertion during scans. Adds metadata resync with the actual cache, ghost trimming, idle p decay, timestamp tie-breaking, and fallback heuristics that avoid evicting B2-hinted keys.
- **Performance**: Achieved a combined score of 0.24 across 48 traces, with high hit rates on some repetitive workloads (up to 0.8934) but very low on many others (several near zero).
- **Feedback**: The scan guard, idle decay, and strengthened REPLACE heuristics improve scan resilience and protect T2 but can over-adjust p and misclassify diverse workloads, hurting performance on cold or churn-heavy traces. Tuning guard windows/thresholds and aligning REPLACE behavior closer to canonical ARC may stabilize results across workloads.
**Program Identifier:** Generation 59 - Patch Name arc_p_in_evict_scan_guard - Correct Program: True

**Program Name: Adaptive ARC with scan-guard**
- **Implementation**: Implements an ARC-style cache with T1/T2 (resident) and B1/B2 (ghost) OrderedDicts, adaptive target p, ghost-hit driven adjustment, periodic resync with the real cache, ghost trimming to 2C, idle decay of p, a scan-guard bias, and a timestamp-based fallback victim selection; uses module-level global state. 
- **Performance**: Combined score to maximize: 0.0; algorithm marked incorrect and failed validation tests.
- **Feedback**: The added scan-guard/idle-decay heuristics and timestamp fallback likely broke ARC invariants and led to inconsistent victim choices, especially with persistent globals and aggressive resync. Resetting state per run and adhering strictly to canonical ARC REPLACE rules (without fallback shortcuts) would improve correctness and stability.
**Program Identifier:** Generation 60 - Patch Name arc_guard_tuned - Correct Program: False

**Program Name: Scan-Guarded SLRU with TinyLFU Ghost Tuning**
- **Implementation**: Three resident segments (W/P/Q) with ghost sets (Gp/Gq) adapt the window size |W| via ghost hits; eviction prefers LRU in W/P and freq+LRU in Q, with ghost-biased victim selection and periodic TinyLFU decay. Cold-streak scan-guard diverts inserts to W, soft caps keep Q from hoarding, and ghosts are pruned to 2×capacity with side-aware trimming.
- **Performance**: Combined score 0.23 over 48 traces, with hit rates ranging 0.0000–0.8744 (strong on frequency-biased/looping traces, weak on diverse/scan-heavy traces).
- **Feedback**: Ghost-driven window tuning and Q soft-capping help frequent workloads, but cold-streak thresholds and conservative default-to-P inserts lead to near-zero hits on some scans and high-diversity traces. Consider more aggressive scan detection or larger baseline |W| under cold streaks, and retune adaptation caps (inc/dec) to stabilize performance across mixed workloads.
**Program Identifier:** Generation 61 - Patch Name slru_balanced_promotion_qtrim - Correct Program: True

**Program Name: ARC-LFU Hybrid Cache Eviction**
- **Implementation**: Implements an ARC-inspired policy with T1/T2 residents and B1/B2 ghosts, dynamically tuning arc_p; eviction samples the k oldest entries and evicts the lowest LFU (with periodic aging) using timestamps for tie-breaks. Includes ghost-hit-driven p updates, idle-triggered p decay to recover from scans, metadata resync with the cache, and ghost trimming bounded to 2× capacity.
- **Performance**: Combined score 0.25 over 48 traces, with strong hit rates on locality-rich traces (up to 0.8934) but poor on scan-like/adversarial traces (often below 0.1, including 0.0000).
- **Feedback**: Results indicate the ARC adaptation plus LFU sampling captures recency/frequency reuse well on mixed/locality workloads but remains vulnerable to long scans and highly diverse accesses; LFU aging and conservative p adjustments may leave stale popularity influencing evictions. The fallback favoring B1 membership can evict frequent items under churn, suggesting tuning of p decay and admission/promotion thresholds could improve robustness.
**Program Identifier:** Generation 62 - Patch Name arc_lfu_hybrid_v2 - Correct Program: True

**Program Name: Scan-Guarded SLRU with TinyLFU Adaptation**
- **Implementation**: Three resident segments (window W FIFO, probation P, protected Q) with two ghost sets (Gp/Gq) drive an adaptive window target (m_target_p) via ghost hits; victim selection is frequency-then-LRU, with TinyLFU-style decaying counts, scan-guarded insertion to P during cold streaks, ghost-biased replacement, and proactive Q→P demotion when P is empty. Window size is clamped between cap/64 and cap/2, ghosts are pruned to ≤2×cap, and hits promote to Q and refresh frequency.
- **Performance**: Combined score 0.23 over 48 traces, with hit rates from 0.0000 to 0.8224 (strong on locality-rich traces, weak on scan/random-heavy ones).
- **Feedback**: Ghost-driven window tuning and scan-guarding improve bursty recency handling, but many low scores on long scans/high churn suggest sensitivity to window bounds and cold-streak thresholds. Direct protect on ghost hits plus proactive demotion can induce segment churn, indicating tuning of adaptation steps and decay cadence matters for stability.
**Program Identifier:** Generation 63 - Patch Name slru_demote_and_tlfu_admission - Correct Program: True

**Program Name: ARC-based adaptive cache with idle decay**
- **Implementation**: Implements ARC with T1/T2 (resident) and B1/B2 (ghost) using OrderedDicts, adapting target p on B1/B2 hits with a step cap and an idle-driven decay toward recency. Eviction follows ARC REPLACE, then prefers evicting B1 members, avoids B2, and finally tie-breaks by timestamps; metadata is resynced and ghost lists are trimmed to 2×capacity.
- **Performance**: Combined score 0.24; hit rates vary widely (peaks at 0.8935 on trace_28, ~0 on several traces), with mid-0.49–0.54 on early traces and strong results on repetition-heavy workloads.
- **Feedback**: The ARC core and ghost-informed fallback help on mixed locality and frequent-reuse traces, but adaptation appears conservative for scans or rapidly shifting phases, causing very low hit rates. Consider more elastic p adjustments, explicit scan detection, or tighter ghost management to improve robustness on adversarial/phase-changing workloads.
**Program Identifier:** Generation 64 - Patch Name arc_pre_replace_p_update_and_2c_ghosts - Correct Program: True

**Program Name: ARC-style adaptive eviction with ghosts**
- **Implementation**: Implements an ARC-like policy using OrderedDicts for T1/T2 (resident) and B1/B2 (ghost), with a tunable target arc_p and capped adjustments. Includes resync with actual cache contents, proportional ghost trimming (<=2x capacity), and timestamp-based fallback for victim selection.
- **Performance**: Combined score 0.24; achieved high hit rates on some traces (up to 0.8925) but very low on many others.
- **Feedback**: The ARC-style adaptation helps on workloads with reusable/frequent items, but conservative arc_p updates and simplified replacement (LRU within T1/T2) appear to underreact to rapid phase changes/streaming, leading to many near-zero traces. All validation tests passed.
**Program Identifier:** Generation 65 - Patch Name arc_2c_ghosts_capped_p_and_disjoint_ghosts - Correct Program: True

**Program Name: Adaptive ARC with idle decay and cold-streak tuning**
- **Implementation**: Implements an ARC-style eviction with OrderedDict-backed T1/T2/B1/B2 lists, adjustable target p, and LRU-based replacement; p adapts on ghost hits, decays when idle, and is nudged by a cold-streak heuristic. Ghost lists are trimmed to ~2× capacity, metadata is resynced with the cache, and a timestamped LRU serves as a fallback.
- **Performance**: Combined score 0.25 across 48 traces, with hit rates spanning 0.0000–0.8908 (strong on locality-heavy traces, weak on several sparse/scan-like traces).
- **Feedback**: The adaptive controls balance recency and frequency well on repeating workloads, but idle decay and cold-streak nudges can overcorrect, degrading scan resistance and sparse reuse performance. Using the pending-promotion path (t1_pending) and refining decay/step sizes could stabilize behavior on low-locality traces.
**Program Identifier:** Generation 66 - Patch Name arc_pre_replace_p_update_and_simplify_insert - Correct Program: True

**Program Name: ARC with scan guard and ghost resync**
- **Implementation**: Implements an ARC variant using OrderedDict-based T1/T2 residents and B1/B2 ghosts with adaptive arc_p, scan detection (cold_streak + scan_guard), idle p decay, and timestamp tie-breaks. It resynchronizes metadata to the actual cache, inserts new items to T1 (LRU during scans), promotes hits to T2, trims ghosts to 2x capacity, and applies a guarded REPLACE and fallback victim search.
- **Performance**: Combined score 0.24; strong on locality-rich traces (peaks ~0.89) but many traces remain low (some near 0), yielding mixed overall results.
- **Feedback**: Scan guard and p adjustments help protect frequent items and reduce scan pollution, boosting repetitive/high-locality workloads, but unconditional T2 promotion and capped/biased p updates can misbalance recency vs. frequency on cyclic or low-locality traces. Tuning scan thresholds, softening unconditional T2 promotion, and refining REPLACE/fallback heuristics could raise weakest-case performance.
**Program Identifier:** Generation 67 - Patch Name arc_scan_guard_x - Correct Program: True

**Program Name: ARC with scan-bias and ghost-guided eviction**
- **Implementation**: Implements ARC using OrderedDicts for T1/T2/B1/B2 with adaptive p updated on ghost hits, idle decay, and metadata resync with the real cache. Adds scan detection (cold_streak) to insert at LRU and bias REPLACE toward T1 during streaks, plus ghost-informed fallbacks and timestamp tie-breakers.
- **Performance**: Combined score 0.25; several mixed traces reach ~0.5 hit rate and best cases peak at ~0.89, but many traces show very low to near-zero hit rates.
- **Feedback**: The scan-bias reduces scan pollution but likely over-penalizes short-term reuse, producing bimodal results and poor performance on bursty/short traces. p-adjustments (bounded steps) may react too conservatively/erratically, while resync and timestamp fallback mainly improve robustness rather than hit rate.
**Program Identifier:** Generation 68 - Patch Name arc_replace_ghost_adjust_scan_bias - Correct Program: True

**Program Name: ARC with frequency sketch and scan guard**
- **Implementation**: ARC-style cache with T1/T2 and ghost lists (B1/B2) using OrderedDicts, adaptive target p, a saturating per-key frequency sketch, and timestamps. Victim selection samples a few LRU candidates and scores by frequency minus age; includes ghost trimming, idle p-decay, cold-streak clamp, and a scan-guard bias.
- **Performance**: Combined score 0.25 across 48 traces; hit rates range from 0.0000 to 0.8908 (strong on traces 27–28, many mid ~0.49–0.54, but numerous low outliers).
- **Feedback**: Adaptation helps on mixed recency/frequency workloads, but aggressive p clamping/decay and shallow sampling cause high variance and weak results on scans/uniform or rapidly shifting phases. The 3-bit frequency saturation and age penalty can mis-rank victims, hurting bursty or looping patterns.
**Program Identifier:** Generation 69 - Patch Name arc_lrfu_sampling - Correct Program: True

**Program Name: ARC with frequency aging and scan guard**
- **Implementation**: Implements Adaptive Replacement Cache (ARC) with T1/T2/B1/B2 using OrderedDicts, adapting target p via ghost hits plus idle-time decay, cold-streak clamps, and scan guard. Eviction within T1/T2 uses a depth-limited LRU peek with an effective score combining a 3-bit saturating frequency sketch and timestamp-based aging, with ghost-aware bias.
- **Performance**: Combined score 0.24 across 48 traces; high hit rates on locality-heavy traces (up to 0.8893) but very low on several streaming/adversarial traces (down to 0.0).
- **Feedback**: The frequency/age-based victim scoring deviates from pure ARC and, alongside aggressive p-decay, can overcorrect and hurt mixed/streaming workloads despite ghost-driven adaptation. Some metadata (e.g., t1_pending) is unused and the coarse frequency sketch may limit distinguishing hot keys, contributing to variability across traces.
**Program Identifier:** Generation 70 - Patch Name arc_bias_trim_freq_guard - Correct Program: True

**Program Name: Adaptive ARC with scan guard and ghost-aware fallback**
- **Implementation**: Implements ARC using OrderedDicts for T1/T2 (resident) and B1/B2 (ghost) with adaptive target arc_p updated by ghost hits, idle decay, and a scan guard (cold_streak and a guard window) that lowers effective p and inserts new items at LRU during scans. Includes cache/metadata resync, ghost trimming to capacity, ghost-informed victim fallback, and a timestamp tie-breaker.
- **Performance**: Achieved a combined score of 0.25 across 48 traces, with hit rates ranging 0.0000–0.8922 (strong on traces 27/28/34/38, weak on several streaming/low-locality traces like 14 and the mid-teens).
- **Feedback**: Ghost-driven adaptation and the scan guard improve frequent/bursty locality but can over-shrink recency space, degrading performance on streaming/low-reuse workloads (many very low-hit traces). Moderating guard duration/thresholds and arc_p step sizes could reduce overreaction while retaining the robustness from resync and ghost trimming.
**Program Identifier:** Generation 71 - Patch Name arc_scan_guard_and_idle_decay - Correct Program: True

**Program Name: ARC with scan-guard and decay heuristics**
- **Implementation**: Implements an ARC-style eviction with T1/T2 (resident) and B1/B2 (ghost) using OrderedDict LRU order, adaptive target p updated on ghost hits, plus p-decay when idle and a scan_guard window triggered by cold streaks. Includes resync to cache contents, ghost-size trimming to capacity, and a timestamp tie-breaker for deterministic fallback.
- **Performance**: Combined score 0.25 across 48 traces; strong on reuse-heavy loops (e.g., 0.75–0.89 on traces 27/28/34/38) but many workloads show very low hit rates (<0.1).
- **Feedback**: Heuristics curb scan thrashing and reward frequency, yet always promoting hits to T2 and the effective_p bias can shrink T1 and hurt recency, explaining weak results on large or near-unique sequences. Retuning p decay/scan-guard strength and admission (e.g., stricter T2 promotion) could improve robustness across diverse workloads.
**Program Identifier:** Generation 72 - Patch Name arc_plus_scan_guard_and_idle_decay - Correct Program: True

**Program Name: W-TinyLFU SLRU with Aging**
- **Implementation**: Uses a two-segment SLRU (probation/protected) via OrderedDict, evicting by sampling the first k LRU entries and choosing the lowest (frequency, timestamp), with a per-key aging frequency sketch (halving counters, capped at 255). On hit it increments frequency and promotes to protected; inserts seed freq 1; protected is capped at 0.8 of capacity with demotions, frequencies persist across evictions, and periodic resync aligns metadata with the actual cache.
- **Performance**: Combined score 0.23; hit rates span 0.0–0.8874 with strong results on skewed/repetitive traces (e.g., 0.8874, 0.7845) and weak on scan-like/low-reuse traces.
- **Feedback**: Frequency retention and first-hit promotion help capture reuse, but a fixed protected ratio and no TinyLFU admission make it scan-vulnerable. Aging tied to access_count and shallow victim sampling (depth ≤ 8) can leave stale items protected; adaptive segment sizing and admission policies could improve robustness.
**Program Identifier:** Generation 73 - Patch Name wtiny_slru - Correct Program: True

**Program Name: ARC-based cache with scan guard**
- **Implementation**: ARC-style eviction with OrderedDict-backed T1/T2 (resident) and B1/B2 (ghosts), adaptive target p updated on ghost hits, bounded idle decay, and a short scan-guard window during cold streaks. Replacement is LRU within T1/T2 biased by p; ghosts are capacity-trimmed, metadata is resynced to the actual cache, and a timestamp map provides deterministic fallback.
- **Performance**: Combined score 0.25 across 48 traces; strong on locality-heavy workloads (peaks up to 0.8893) but near-zero on several scan-like traces.
- **Feedback**: The adaptive p and ghost signals effectively balance recency and frequency, and the scan guard helps resist transient cold bursts, driving high hits where locality exists. However, performance collapses on streaming workloads; some complexity (e.g., unused t1_pending and aggressive ghost-hit promotion to T2) may add overhead without improving robustness.
**Program Identifier:** Generation 74 - Patch Name arc_scan_guard_and_decay - Correct Program: True

**Program Name: ARC with idle decay and scan guard**
- **Implementation**: Implements an ARC variant with T1/T2 resident lists and B1/B2 ghost lists, using OrderedDict for LRU/MRU and pre-REPLACE p adjustments on ghost hits. Adds proportional idle-time decay of p, a cold-streak-driven scan guard (reduces effective_p), periodic resync/ghost trimming, and LRU-timestamp fallback.
- **Performance**: Combined score 0.25; hit rates spanned 0.0000–0.8893 with strong results on locality-rich traces (e.g., 27–28, 34, 38) and ~0.5 on several mixed workloads, but very low on low-repeat/random streams.
- **Feedback**: Adaptive controls (idle decay and scan guard) likely preserved frequent items and curbed scan pollution, driving the top scores, yet the approach still struggles when reuse is scarce. Minor detail: t1_pending is unused and could be removed or completed to simplify and clarify state handling.
**Program Identifier:** Generation 75 - Patch Name arc_pre_replace_scan_guard_and_paware_ghosts - Correct Program: True

**Program Name: ARC with Cold-Streak and Scan-Guard Adaptation**
- **Implementation**: ARC using OrderedDicts for T1/T2/B1/B2 with p adapted by ghost hits, proportional idle decay, a one-time cold-streak clamp, and a scan-guard window that biases REPLACE. Includes metadata resync, p-aware ghost trimming, and deterministic eviction fallbacks with timestamp tie-breaks.
- **Performance**: Combined score 0.23 over 48 traces, reaching up to 0.8874 on some workloads but with several very low/near-zero traces.
- **Feedback**: Ghost-driven p updates and promotion-on-ghost-hit boosted mid/high-hit workloads, but scan-heavy/adversarial traces still collapse, implying decay/clamp/guard tuning is too conservative (faster p contraction and longer guard windows may help). Resync and fallbacks improve robustness yet may yield suboptimal victims when lists are sparse, contributing to low-hit outliers.
**Program Identifier:** Generation 76 - Patch Name arc_guarded_replace_v2 - Correct Program: True

**Program Name: ARC with scan-aware heuristics**
- **Implementation**: Implements ARC using OrderedDicts for T1/T2 (resident) and B1/B2 (ghost), with adaptive target arc_p updated on ghost hits, decayed when idle, and a cold_streak signal to bias evictions toward T1 during suspected scans. Adds metadata resync with the actual cache, keeps ghost lists within capacity, and uses ghost-informed fallback victim selection plus timestamp tie-breakers.
- **Performance**: Overall combined score 0.25 across 48 traces; hit rates ranged from 0.0000 to 0.8922, with several mid-to-high results (~0.5–0.89) but many low/near-zero outcomes.
- **Feedback**: Heuristics improved results on locality-rich and recurrent-access traces but underperformed on scan-heavy or oversized working sets, suggesting arc_p adaptation and scan detection can be too conservative or slow. Consistency mechanisms (resync and ghost trimming) aid correctness, yet the high variance indicates admission/eviction thresholds may need tuning to reduce near-zero-hit cases.
**Program Identifier:** Generation 77 - Patch Name arc_plus_ghost_p_update_and_scan_guard - Correct Program: True

**Program Name: ARC cache with scan guard and ghosts**
- **Implementation**: Implements an ARC-inspired policy with OrderedDict T1/T2 residents and B1/B2 ghosts, adaptive target p driven by ghost hits, and idle-decay plus cold-streak scan guard (LRU probation inserts). Eviction uses guard-adjusted REPLACE and deterministic fallbacks that prefer non-B2 T1 keys, B1-hinted T2 keys, bounded peeks, then timestamp tie-breakers; metadata is resynced to the cache and ghosts are capacity-trimmed.
- **Performance**: Combined score 0.25 across 48 traces, with several strong cases (up to 0.8922) but many low/near-zero hit rates.
- **Feedback**: Results suggest scan/cold heuristics and aggressive p decay sometimes overreact, skewing T1/T2 balance and hurting mixed or moderately repetitive workloads. Ghost-aware fallbacks and resync improve robustness, but variance indicates p updates and guard windows should be tempered toward canonical ARC behavior for more consistent gains.
**Program Identifier:** Generation 78 - Patch Name arc_paware_guard - Correct Program: True

**Program Name: ARC with scan guard and ghost-aware eviction**
- **Implementation**: Implements an ARC-style cache using OrderedDicts for T1/T2 and ghost lists B1/B2, with adaptive target arc_p updated on ghost hits, idle decay, and a short-lived scan guard. Admissions send ghost hits to T2 and brand-new keys to T1 (often at LRU during suspected scans), eviction follows ARC REPLACE with an effective_p during scans and ghost-informed fallbacks; metadata is resynced and timestamps provide a last-resort tie-breaker.
- **Performance**: Combined score 0.25 across 48 traces, with hit rates ranging from 0.0 to 0.8922—strong on locality-rich traces (e.g., 27, 28, 34, 38) but weak on scan/unique-heavy workloads.
- **Feedback**: Ghost-driven p adjustment and scan-guarded probation reduced scan pollution and improved mixed-workload behavior. Several traces still collapsed to near-zero hit rate, indicating the extra clamps/effective_p may over-constrain T2 or that those workloads had minimal reuse.
**Program Identifier:** Generation 79 - Patch Name arc_scan_guard_and_paware_ghost_trim - Correct Program: True

**Program Name: Adaptive ARC with frequency sketch and scan-guard**
- **Implementation**: ARC variant using OrderedDict-based T1/T2/B1/B2 with ghost-hit-driven arc_p adaptation, small saturating per-key frequency counters, and timestamps. Victim selection uses depth-limited sampling with an effective score (frequency minus age penalty), plus ghost trimming with hysteresis, scan-guard biasing, and idle decay of arc_p; metadata is kept consistent via resync and disjoint ghost maintenance.
- **Performance**: Combined score 0.25 across 48 traces; hit rates span from near 0 on worst scans to 0.8905 on high-locality traces.
- **Feedback**: Frequency-aware scoring and ghost adaptation help on recurring/high-locality workloads (e.g., traces 27–28, 34, 38), yielding strong hit rates. Despite scan-guard and decay, many scan/low-locality traces remain weak (<0.1), indicating arc_p clamping/aging and sampling depth may still be too aggressive or insufficiently adaptive for streaming patterns.
**Program Identifier:** Generation 80 - Patch Name arc_plus_tiny_freq_hysteresis - Correct Program: True

**Program Name: ARC + TinyLFU with Scan Guard**
- **Implementation**: Hybrid ARC (T1/T2 with B1/B2 ghosts) with dynamic p, augmented by a resident-only TinyLFU frequency map and timestamps for frequency-aware victim selection in an LRU-side window; includes idle/p decay, periodic freq decay, scan detection (cold_streak, guard window), LRU-side insert during scans, ghost trimming, and metadata resync.
- **Performance**: Combined score 0.25 over 48 traces; strong on locality/looping workloads (peaks 0.8922) but collapses on scan/adversarial streams (down to 0.0000).
- **Feedback**: The freq-aware window helps preserve hot items, but resident-only LFU and a conservative scan guard/admission allow streaming workloads to thrash; stronger admission (e.g., TinyLFU admission/Doorkeeper) or more aggressive p clamping during cold streaks may improve worst-case behavior.
**Program Identifier:** Generation 81 - Patch Name arc_lfu_guard - Correct Program: True

**Program Name: Adaptive ARC with scan guard and ghost heuristics**
- **Implementation**: ARC variant using OrderedDict-based T1/T2/B1/B2 with canonical REPLACE driven by an effective p that includes idle decay and a cold-streak-triggered scan guard with one-shot demotion bias. Ghost hits adjust p via capped ceil-ratio steps; deterministic fallbacks favor T1-not-in-B2, T2-in-B1, then timestamp tie-breaks, with ghost trimming hysteresis and periodic resync.
- **Performance**: Combined score 0.25 over 48 traces; hit rates span 0.0000–0.8922 with solid 0.45–0.54 on several traces and strong wins on 27/28/34/38, but very low on scan-heavy sequences (e.g., trace 14).
- **Feedback**: Scan guard and capped p updates stabilize mixed workloads and boost frequent-reuse cases, but under-react to pure scans, yielding near-zero hits in those traces. More aggressive T1 bias or faster decay during sustained cold streaks could improve scan resistance; fallback/timestamp heuristics aid determinism but don’t mitigate scan-heavy patterns.
**Program Identifier:** Generation 82 - Patch Name arc_hysteresis_guard_v2 - Correct Program: True

**Program Name: Guarded ARC with Ghost-Aware Eviction**
- **Implementation**: ARC with T1/T2 and ghost B1/B2 via OrderedDicts, adaptive p updated on ghost hits, plus idle-decay, cold-streak detection with a short guard window, and a one-shot demotion bias; includes resync with cache contents, ghost trimming with hysteresis, remembered source for correct ghosting, deterministic fallbacks, and timestamp tie-breaking.
- **Performance**: Combined score 0.25 across 48 traces; strong on locality-heavy traces (up to 0.8922) but many workloads show low hits (several <0.1, including one at 0.0000).
- **Feedback**: The scan guard and p-decay heuristics reduce scan pollution and boost reuse-heavy traces (e.g., 27, 28, 34, 38) but appear too aggressive for mid-distance recency/phase-shifted workloads, leading to very low hits. Consider softening p-decay and guard effects (shorter guard, smaller p_eff drop, less punitive LRU insertion) to preserve T1 recency during transitions.
**Program Identifier:** Generation 83 - Patch Name arc_guarded_hysteresis_v3 - Correct Program: True

**Program Name: ARC+TinyLFU Hybrid with Scan Guard**
- **Implementation**: Combines ARC (T1/T2 with B1/B2 ghosts) with a TinyLFU-style resident frequency map and timestamp tie-breakers; p adapts via ghost hits, idle decay, and a scan guard driven by cold_streak, with frequency decay and ghost trimming bounded by capacity. Eviction picks a freq-aware LRU from a small LRU-side window and uses ghost-informed fallbacks to avoid frequent keys.
- **Performance**: Combined score 0.25, with strong hit rates on locality-rich traces (peaks 0.8922, several ~0.5–0.64) but very low on many others (some near 0.0–0.12).
- **Feedback**: The hybrid design excels on mixed recency/frequency and repeated working sets, but struggles on highly random or scan-heavy patterns despite the scan guard. Thresholds (e.g., cold_streak ≥ C/2, window ≈ C/8) and decay cadence likely dampen responsiveness, suggesting tuning these parameters could improve robustness across adversarial traces.
**Program Identifier:** Generation 84 - Patch Name tiny_lfu_window_and_guard_hysteresis - Correct Program: True

**Program Name: Deterministic LeCaR Hybrid LRU/LFU Cache**
- **Implementation**: LeCaR-style hybrid selects eviction deterministically by the higher-weight expert between LRU (OrderedDict MRU/LRU) and LFU (per-key frequency with timestamp tie-break), with multiplicative-weights updates on misses attributing regret to the last evicting policy. Frequencies are halved every max(1000, capacity) accesses, expert weights drift 10% toward 0.5 every max(512, capacity), weights are clamped/normalized, and metadata is resynchronized with the cache each access.
- **Performance**: Achieved combined score 0.21 over 48 traces, with hit rates ranging 0.0000–0.8735 (e.g., 0.8735 on trace_28, near 0 on traces 14/32/33).
- **Feedback**: Strong on temporal locality or stable reuse patterns, but degrades on scan/adversarial and highly non-stationary workloads, indicating slow decay and deterministic expert choice can overcommit and hurt adaptation. Faster/trace-aware decays and probabilistic expert mixing (instead of hard selection) could improve robustness and reduce worst-case collapses.
**Program Identifier:** Generation 85 - Patch Name lecar_lru_lfu_hybrid - Correct Program: True

**Program Name: ARC+TinyLFU Cache with Scan Guard**
- **Implementation**: Hybrid ARC with ghost lists (B1/B2) and adaptive target p, augmented by a Tiny-LFU frequency map (with periodic decay) and timestamps for tie-breaking. Eviction uses a windowed LFU-aware pick on T1 and pure LRU on T2, includes scan detection (cold_streak/short-lived guard), idle p-decay, and ghost trimming with hysteresis; eviction source is tracked to ghost correctly.
- **Performance**: Combined score 0.25 across 48 traces, with very strong hits on some workloads (e.g., 0.85–0.89) but many traces exhibiting low to near-zero hit rates.
- **Feedback**: Tiny-LFU bias and ARC ghost feedback help on frequent/reuse-heavy workloads, but aggressive scan guard and p-decay/clamping likely over-constrain T1 and slow adaptation, hurting mixed/streaming patterns. Guard cancellation on any hit and short guard windows may under-mitigate scans, while T2’s pure LRU may underutilize frequency in certain mixes.
**Program Identifier:** Generation 86 - Patch Name arc_tinylfu_p_hysteresis_guard_and_correct_ghosting - Correct Program: True

**Program Name: ARC with scan-guard and second-chance**
- **Implementation**: ARC with T1/T2 and B1/B2 using OrderedDicts; arc_p adapts via ghost hits plus idle-time decay and a scan-guard window with one-shot demotion bias. Eviction uses guard-adjusted p (p_eff), skips very-recent hits, applies source-aware ghosting, timestamp tie-breakers, hysteretic ghost trimming, and metadata resync to actual cache contents.
- **Performance**: Combined score 0.25 over 48 traces; hit rates span 0.0–0.8922 with strong results on repetitive/frequent workloads (e.g., 27–28, 34, 38) but weak on many scan-heavy traces (<0.1).
- **Feedback**: Scan-guard and demotion reduce pollution but can over-clamp recency (LRU-on-insert under guard) leading to near-zero hit rates on pure scans and short bursts. Moderating guard aggressiveness/extra clamps and revisiting the recent-hit shield could better balance recency vs. frequency without starving cold-but-repeating keys.
**Program Identifier:** Generation 87 - Patch Name recent_hit_second_chance - Correct Program: True

**Program Name: ARC+TinyLFU with Scan Guard**
- **Implementation**: Blends ARC (T1/T2 with B1/B2 ghosts) with adaptive p updated on ghost hits, plus a lightweight Tiny-LFU (resident-only frequency with periodic decay). Eviction chooses from small LRU-side windows using (freq,timestamp) tie-breakers, includes hysteretic ghost trimming, scan detection via cold_streak with LRU probation inserts and temporary p reduction, and a one-shot T2 demotion bias.
- **Performance**: Combined score 0.25 across 48 traces, with mid ~0.48–0.54 on several general traces, peaks up to 0.892 on locality-heavy traces, and many near-zero results on cold/streaming workloads.
- **Feedback**: Ghost-driven p adaptation and LFU-biased selection help recurring/locality-rich workloads (seen in the high-hit traces), while the scan guard and aggressive cold-streak handling can suppress recency and hurt performance on low-reuse or streaming patterns. Tuning guard length/thresholds, p step/decay limits, and LFU window sizes could reduce extremes and improve robustness across diverse traces.
**Program Identifier:** Generation 88 - Patch Name arc_tiny_lfu_demote_bias - Correct Program: True

**Program Name: ARC with freq-age scoring and scan guard**
- **Implementation**: Adaptive Replacement Cache with T1/T2 and B1/B2 ghosts, adaptive p (ghost-hit driven and idle-decayed), delayed promotion via a pending window, and a tiny saturating frequency sketch. Victims are chosen by depth-limited LRU sampling within the selected list using an effective score that mixes short-term frequency and timestamp aging, plus scan-guard bias and proportional ghost trimming.
- **Performance**: Combined score 0.24 across 48 traces, with strong results on several workloads (peaks up to 0.885) but many low-hit cases (<0.1).
- **Feedback**: Excels on recurring/frequent reuse patterns and smaller working sets (e.g., traces 27, 28, 34, 38). Underperforms on long scans or high-churn streams where conservative promotion and p decay can penalize mid-frequency items despite the scan guard, leading to uneven consistency across traces.
**Program Identifier:** Generation 89 - Patch Name arc_2q_pend_lfu_guard - Correct Program: True

**Program Name: ARC Guard+ with scan guard and ghost tuning**
- **Implementation**: ARC variant with ratio-based p updates only on B1/B2 ghost hits, a short scan guard that lowers effective_p and can force a one-shot T2 demotion, plus hysteretic ghost trimming toward the p split. Uses OrderedDict MRU/LRU for T1/T2/ghosts, resyncs with the actual cache, applies guarded T1-LRU admission for brand-new items, and prevents double p-updates across evict/insert with bookkeeping flags and timestamped fallback victim selection.
- **Performance**: Combined score 0.25 across 48 traces (hit rates 0.00–0.8922), correct and passes all tests.
- **Feedback**: The scan guard and targeted T2 demotion reduce scan pollution and enable strong peaks on locality-rich traces, but ghost-only p adjustments and gentle decay can undersize T2 when B2 is empty, hurting steady reuse on many workloads. Consider tempering guard activation (cold_streak threshold/window) and balancing REPLACE to avoid over-evicting from T2 in low-ghost regimes.
**Program Identifier:** Generation 90 - Patch Name arc_guard_plus - Correct Program: True

**Program Name: ARC with scan guard and ghost hysteresis**
- **Implementation**: Implements ARC with OrderedDicts for T1/T2 (resident) and B1/B2 (ghost), adjusting target p only on ghost hits, with hysteretic ghost trimming and periodic resync to actual cache contents. Adds scan detection via cold_streak and a guard window that lowers effective p and inserts new items at T1-LRU; includes one-shot T2 demotion and timestamp-based fallback victim selection.
- **Performance**: Combined score 0.25 across 48 traces, with hit rates ranging from 0.0000 to 0.8922 (notably strong on traces 27–28, 34, 38 but many low-hit cases reduced overall performance).
- **Feedback**: The scan guard likely curbed pollution in streaming workloads, but aggressive guard/demotion and bounded probing can undercut T2 retention on churny workloads, yielding many very low-hit traces. Tuning p step sizes, shortening the guard window, and reevaluating force-from-T2 bias could improve robustness across heterogeneous workloads.
**Program Identifier:** Generation 91 - Patch Name arc_guard_plus_refine - Correct Program: True

**Program Name: ARC with Adaptive p and Scan Guard**
- **Implementation**: Implements Adaptive Replacement Cache with T1/T2 resident sets and B1/B2 ghost lists, ghost-driven p tuning, and a scan guard using cold_streak/scan_guard_until; uses OrderedDict MRU/LRU helpers and a timestamp tie-breaker. Includes cache resync, hysteretic ghost trimming, precise ghost routing via last_replaced_from, and ghost-aware fallback victim selection.
- **Performance**: Combined score 0.25 across 48 traces; strong on some mixed workloads (up to 0.8922) and around 0.44–0.54 on several, but very low on many sparse/streaming traces.
- **Feedback**: Ghost-driven adaptation and the scan guard improved robustness to scans and mixed recency/frequency, but the policy struggles on random or long-reuse-distance patterns where ghosts give weak feedback and p decays slowly. Tuning guard windows and p step/decay, and refining insert-at-LRU thresholds, may reduce pollution without suppressing useful recency.
**Program Identifier:** Generation 92 - Patch Name arc_guard_refine_lastsrc - Correct Program: True

**Program Name: ARC with frequency sketch and scan guard**
- **Implementation**: ARC-style cache with T1/T2 residents and B1/B2 ghosts, adaptively tuning p via ghost hits and idle decay. Victims are chosen within a small LRU window using an age-penalized, saturating frequency score with short second-chance protection; includes scan guard/demotion bias, ghost trimming, resync, and precise ghosting via last_replaced_from.
- **Performance**: Combined score 0.25 across 48 traces, with strong hit rates on reuse-heavy traces (e.g., 0.8510, 0.8935, 0.7206, 0.6404) but many near-zero results on streaming-like workloads (e.g., 0.0000, 0.0107).
- **Feedback**: The adaptive ARC plus frequency/age scoring helps on mixed and frequent workloads, but scan guard and p-decay may be too conservative, leaving poor streaming resistance and weak recency capture on highly sparse traces. Tuning the guard window, p update bounds, and victim selection depth could improve robustness across diverse access patterns.
**Program Identifier:** Generation 93 - Patch Name arc_sf2_guard - Correct Program: True

**Program Name: ARC with Scan Guard and Idle Decay**
- **Implementation**: ARC-style cache using OrderedDict-backed T1/T2 residents and B1/B2 ghosts, with adaptive target p, ghost-driven p updates, idle decay, cold-streak tracking, and short guard windows; eviction uses ARC REPLACE with guard-adjusted p, ghost-aware fallbacks, and timestamp tie-breakers. Metadata resync and ghost trimming keep structures consistent and bounded.
- **Performance**: Combined score 0.25 across 48 traces; strong on locality-heavy traces (27=0.851, 28=0.892, 34=0.769, 38=0.640) but very weak on scan/cold-start workloads with many near-zero hit rates (e.g., 14=0.000).
- **Feedback**: Ghost-driven adaptation and guarded LRU insertion curb some scan pollution, but p still oscillates during prolonged cold streaks, causing frequent misses on diverse/streaming traces. One-shot demotion and hysteretic ghost trimming help stability yet remain insufficient for large scans and highly non-repeating workloads.
**Program Identifier:** Generation 94 - Patch Name arc_p_sync_and_guard_tuning - Correct Program: True

**Program Name: ARC with scan-guard and idle-decay**
- **Implementation**: ARC-style cache with T1/T2 residents and B1/B2 ghosts via OrderedDicts; adapts target p with hysteresis, idle decay, and a short scan-guard that reduces effective p and inserts cold items at LRU. Uses per-access p-adjustment gating, last_replaced_from for correct ghosting, resync to actual cache, and timestamps for deterministic tie-breaking.
- **Performance**: Combined score to maximize: 0.25 over 48 traces; hit rates ranged from 0.0000 to 0.8922 (notably strong on traces 27/28/34/38, many others in the 0.02–0.12 range).
- **Feedback**: The algorithm excels on frequency/locality-heavy workloads but struggles on scan/adversarial or ultra-cold traces despite the guard, indicating the guard/decay are insufficient or too conservative. Consider stronger scan detection and more aggressive T1 eviction/ghost management to reduce pollution and avoid near-zero hit rates.
**Program Identifier:** Generation 95 - Patch Name gentle_guard_tuning_and_effective_p - Correct Program: True

**Program Name: Adaptive SLRU + TinyLFU Cache**

- Implementation: Two-segment SLRU (probationary/protected) with ghost histories and a Count-Min Sketch for TinyLFU-style victim ranking; protected ratio adapts via ghost hits and a cold-scan guard that inserts at LRU and downshifts the target. Eviction samples oldest candidates from both segments, scores by estimated frequency with a bias against protected, and ties by timestamps; promotions on hit and optional direct-to-protected on protected-ghost hits, with periodic CMS aging and segment rebalancing.
- Performance: Combined score is 0.0; the program fails validation tests.
- Feedback: Global state is never reset between runs (capacity, CMS, ghosts, segments), causing cross-trace contamination and breaking correctness; add per-run reinitialization. The admission/balancing logic can desynchronize with the framework (resync only on evict, aggressive target_S1 drift during scans), leading to inconsistent victim selection and poor hit behavior.
**Program Identifier:** Generation 96 - Patch Name slru_tinylfu_adaptive - Correct Program: False

**Program Name: ARC+TinyLFU Hybrid with Scan Guard**
- **Implementation**: Combines ARC (T1/T2 with B1/B2 ghosts) with resident Tiny-LFU counts and timestamps; eviction uses small LRU-window, frequency-biased selection, adaptive p updates (ghost hits, idle decay), hysteretic ghost trimming, scan detection via cold_streak/guard, and precise ghost placement using last_replaced_from. Periodic frequency decay and metadata resync ensure freshness and robustness.
- **Performance**: Combined score 0.25 across 48 traces; hit rates range from 0.0 to 0.8922 with strong results on several locality-heavy traces (e.g., 27/28/34/38) and very low ones on others (e.g., 11–19, 14).
- **Feedback**: LFU-biased REPLACE and T2 promotion capitalize on frequent reuse, but scan guard and p decay/clamping sometimes fail to handle long cold streams or highly diverse workloads, leading to thrash and near-zero hits. Refining scan detection and being stricter on new-key admissions (e.g., larger probation/Doorkeeper) would likely improve worst-case behavior.
**Program Identifier:** Generation 97 - Patch Name freq_aware_t2_and_faster_decay - Correct Program: True

**Program Name: ARC + TinyLFU hybrid with scan guard**
- **Implementation**: Combines ARC (T1/T2 with B1/B2 ghosts) with ghost-driven adaptive p, Tiny-LFU-biased T1 eviction over an LRU-side window, periodic frequency decay, timestamp tie-breaking, scan detection/guard, and hysteretic ghost trimming; uses OrderedDict for MRU/LRU and records last_replaced_from for precise ghosting.
- **Performance**: Combined score 0.25 across 48 traces, with strong hit rates on several (e.g., 0.89/0.85/0.77/0.64 on traces 28/27/34/38), moderate ~0.48–0.54 on many, but very low on scan-like or highly cold traces (including 0.00 on trace 14).
- **Feedback**: The hybrid improves mixed recency/frequency workloads and preserves frequent items, but scan mitigation still underperforms on heavy one-pass streams and some cold phases, suggesting the guard/decay heuristics and conservative T2-LRU choice may over/under-react; consider tuning the scan threshold/window, modest LFU influence on T2 evictions, or slightly larger T1 sampling to stabilize weak cases.
**Program Identifier:** Generation 98 - Patch Name arc_tiny_lfu_guarded_bias - Correct Program: True

**Program Name: ARC+TinyLFU with scan guard**
- **Implementation**: Hybrid ARC with adaptive p (T1/T2 plus ghost B1/B2), using Tiny-LFU resident frequencies with periodic decay to bias small LRU-window evictions. Adds timestamp tie-breaks, hysteretic ghost trimming, cold-streak scan guard (LRU probation inserts and one-shot T2 demotion), idle-driven p decay, resync to cache, and precise ghosting via last_replaced_from.
- **Performance**: Combined score 0.26 across 48 traces; hit rates ranged 0.0000–0.8922, with strong results on locality-heavy traces (e.g., 27, 28, 34, 38) but very low on many others.
- **Feedback**: The ARC+LFU fusion benefits frequent/reuse workloads, yet scan-guard and p-decay tuning still permit near-zero hits on several cold/streaming traces (14–18) and sparse workloads. Consider earlier/stronger scan admission control (bypass), gentler p decay, and adjusted LFU window sizes to stabilize performance across mixed patterns.
**Program Identifier:** Generation 99 - Patch Name arc_tinylfu_t2_bias_and_scan_one_shot - Correct Program: True

# GLOBAL INSIGHTS SCRATCHPAD

The following are global insights about optimization approaches and their effectiveness:

## Successful Algorithmic Patterns
- ARC foundation with restrained LFU bias lifted the average without sacrificing peaks. The current best program, “ARC+TinyLFU with scan guard” (Gen 99, 0.26), preserves canonical ARC decisions (ghost-driven p updates before REPLACE, immediate promotion of hits to T2 MRU, resident/ghost disjointness, metadata resync/ghost trimming) and only adds a small-window, resident-only TinyLFU bias for victim choice (T1 window up to 8, T2 up to 16), plus timestamp tie-breaks. It matches top peaks (e.g., 28=0.8922, 34≈0.768, 38=0.6404) while slightly raising the overall combined score over the 0.25 cohort.
- Lightweight, cold-streak-driven scan guard with precise demotion trigger contains scan pollution without derailing ARC. The best program uses a short guard window and a one-shot T2 demotion only when guard_active and B2 is empty while T2 dominates; brand-new items are inserted at T1-LRU during guard. Similar guards in ARC-only variants (Gen 90–95, 0.25) reduced scan pollution and enabled strong locality peaks.
- Bounded, ghost-driven p adaptation with idle decay stabilized across phases. Across the 0.25–0.26 performers, p updates are driven only by B1/B2 hits with capped steps (≈C/8) and proportional idle decay, avoiding oscillation. The best program follows this pattern and resets cold streaks on ghost hits, maintaining stability on mixed workloads.

## Ineffective Approaches
- Over-aggressive or poorly tempered scan guards starved recency and T2 in low-ghost regimes. ARC-only variants (Gen 90–95, all 0.25) report that guard aggressiveness and gentle p decay can undersize T2 when B2 is empty, producing many very low-hit traces (e.g., trace_14=0.000; 15–19≈0.02). Feedback highlights force-from-T2 bias and long guard windows as culprits.
- Deviations from ARC victim selection via deeper frequency/age scoring increased volatility. A frequency-sketch variant (Gen 93, 0.25) achieved strong highs (e.g., 0.8935/0.8510/0.7206/0.6404) but still had many near-zero streaming results (e.g., 0.0000, 0.0107), echoing earlier 0.24 outcomes that mis-ranked victims on sparse/streaming access patterns.
- Complex hybrids without strong admission control didn’t improve the floor. Other ARC+TinyLFU hybrids (Gen 97–98, 0.25) matched peaks but still posted near-zero hits on scans (e.g., trace_14=0.00), indicating that resident-only LFU maps and conservative guards alone don’t fix scan-heavy collapses.
- Missing metadata hygiene breaks correctness. “Adaptive SLRU + TinyLFU Cache” (Gen 96, 0.0) failed validation due to not resetting global state between runs, desynchronizing segments/ghosts and contaminating results across traces.

## Implementation Insights
- What makes the current best effective:
  - Canonical ARC semantics are preserved and anchored by metadata hygiene: per-access _resync to cache contents, disjoint ghost maintenance, and hysteretic _trim_ghosts tied to p (as seen in Gen 99 and echoed in Gen 90–95). This prevents drift and mis-evictions under churn.
  - REPLACE stays ARC-correct, with only local, small-window LFU bias: _pick_freq_aware_lru samples the LRU-side window and selects by (freq, timestamp). This avoids global re-ranking that hurt other frequency/age attempts while still lifting mid-tier hits (e.g., traces 9=0.5399, 10=0.5310).
  - Guarded admissions and precise demotion trigger: brand-new items go to T1 LRU under guard; a one-shot T2 demotion is only set when guard is active, B2 is empty, and T2 dominates—tempering T2 shedding to just scan phases. Both the best program (Gen 99) and ARC-only guards (Gen 90–95) tie guard activation to cold_streak thresholds and short windows.
  - Accurate ghosting via last_replaced_from and deterministic fallbacks: last_replaced_from ensures correct ghost placement (B1/B2), timestamps provide stable tie-breakers when lists are sparse, and ghost-aware fallbacks prefer T1 LRU not in B2 or T2 LRU in B1, maintaining ARC’s intent.
- Periodic frequency decay and resident-only maps are sufficient when kept lightweight. Gen 99 decays counts every max(64, C) accesses by halving, preventing stale dominance while keeping overhead low and bounded.

## Performance Analysis
- The best program (Gen 99, 0.26) maintains the hallmark peaks of the strong ARC family: 28=0.8922, 34≈0.7684, 38=0.6404, while only slightly dipping on 27 (0.8252 vs ≈0.851 in 0.25 variants). Its mid-tier remains strong (e.g., traces 1–6 ≈0.44–0.54, 9=0.5399, 10=0.5310, 47=0.4663), likely accounting for the lift from 0.25 to 0.26.
- The floor on scan/cold workloads remains weak across ARC-only and hybrid variants: trace_14=0.0000 and 15–19≈0.02 in the best program mirror the near-zero results in Gen 90–95 and Gen 97–98, indicating scan guard tuning alone hasn’t raised worst-case hit rates.
- Hybrids vs pure ARC: Multiple ARC+TinyLFU hybrids (Gen 97–99) matched locality peaks but only Gen 99 achieved 0.26. The difference correlates with restrained frequency influence (small LRU windows, resident-only counts, periodic decay) while keeping ARC REPLACE thresholds intact; heavier or broader frequency/age re-ranking (as noted in prior 0.24 results and Gen 93 feedback) increases variance without improving the floor.
- Metadata discipline is a consistent predictor of stability at the top: programs with explicit resync, disjoint ghosts, and p-bounded updates (Gen 90–95, 97–99) consistently score 0.25–0.26, whereas implementations with metadata drift or missing resets (Gen 96) collapse to 0.0 despite sophisticated policies.

# META RECOMMENDATIONS

The following are actionable recommendations for the next program generations:

1. Add ghost-informed tie-breaks inside the small-window victim pick. In _pick_freq_aware_lru, extend the candidate tuple to prefer ARC-consistent hints: for T1 use (in_B2?1:0, freq, timestamp), penalizing items hinted as frequent; for T2 use (in_B1?0:1, freq, timestamp), favoring items with only recency hints. Keep window sizes unchanged (T1 up to 8, T2 up to 16) to preserve the restrained LFU influence that worked in Gen 99.

2. Make the one-shot scan demotion smarter and safer. When guard_active and len(B2)==0 and len(T2) > len(T1), select the demotion victim from T2 via _pick_freq_aware_lru with a tiny window (e.g., min(8, max(1, C//16))) and only proceed if its m_key_freq ≤ 1; otherwise skip the demotion to avoid harming true frequent items. Add a short cooldown (e.g., guard_demote_cooldown = access_count + min(8, max(1, C//16))) so this bias cannot trigger back-to-back, reducing the risk of starving T2 in low-ghost regimes.

3. Adapt LFU window sizes and decay rate based on ghost activity and guard state. Shrink windows under scan suspicion or weak frequency hints: if guard_active or len(B2)==0 set window_T1=min(6, max(1,C//20)) and window_T2=min(8, max(2,C//16)); otherwise allow window_T2 to grow modestly (e.g., up to 24) when len(B2) ≥ len(B1). Accelerate decay during scans (interval = max(32, C//2) when guard_active and B2==0) and slow it when frequent history is strong (interval = max(96, C) when len(B2) > len(B1)), and cap per-key m_key_freq at a small constant (e.g., 7) to prevent stale dominance while keeping the bias lightweight.

4. Gate and smooth p adaptation by ghost volume and imbalance. Apply the existing ceil-step update only when (len(B1)+len(B2)) ≥ max(1, C//4) to avoid overreacting during early, sparse phases; otherwise, defer p changes. Additionally, require |len(B2)-len(B1)| ≥ max(2, C//16) before stepping and allow a larger clamp (up to C//4) only after a prolonged cold_streak ≥ C, preserving the stable, bounded ARC behavior while improving robustness across phase shifts.

5. Disable frequency bias during the guard and strengthen guard re-arming hysteresis. When guard_active, bypass the LFU-aware victim pick by using pure LRU (window size = 1) for both T1 and T2 picks, relying on the one-shot demotion to contain scans; restore the normal small-window LFU after the guard ends. Only re-arm the guard after a fresh run of consecutive brand-new inserts ≥ max(1, C//8) since the last guard cancellation, and compute guard length as min(8, max(1, C//16)) + min(2, (cold_streak - C//2)//max(1, C//16)) with the same cap, to be short, gentle, and non-oscillatory.