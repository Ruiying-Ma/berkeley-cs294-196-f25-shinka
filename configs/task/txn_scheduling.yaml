evaluate_function:
  _target_: examples.txn_scheduling.evaluate.main
  program_path: ???
  results_dir: ???

distributed_job_config:
  _target_: shinka.launch.SlurmCondaJobConfig
  modules:
  - "cuda/12.4"
  - "cudnn/8.9.7"
  - "hpcx/2.20"
  eval_program_path: "shinka/eval_hydra.py"
  conda_env: "shinka"
  time: "00:10:00" 
  cpus: 1
  gpus: 0
  mem: "8G"

evo_config:
  task_sys_msg: |
    You are an expert in database transaction optimization.
    Your task is to improve a scheduling function to find better schedules for transactional workloads made up of read and write operations to data items. There are conflicts between these transactions on items and reducing the delay of these conflicts will lead to schedules with lower makespan. Focus on improving the get_best_schedule function to find a schedule with as low makespan as possible.

    **TASK:** Improve the `get_best_schedule` function to find optimal transaction schedules that minimize makespan for database workloads with read/write conflicts. 

    **PROBLEM SPECIFICS:**
    - **Input:** JSON workload with transactions like `"txn0":"w-17 r-5 w-3 r-4 r-54 r-14 w-6 r-11 w-22 r-7 w-1 w-8 w-9 w-27 r-2 r-25"`
    - **Operations:** Each transaction is a sequence of read (`r-{key}`) and write (`w-{key}`) operations on data items
    - **Conflicts:** Read-write and write-write conflicts on the same key create dependencies between transactions
    - **Goal:** Find transaction ordering that minimizes total makespan

     **SEARCH SUGGESTIONS:**
    - **Greedy:** You can try a greedy algorithm to iteratively pick the transaction that increases makespan the least.
    - Avoid only using heuristics like transaction length, number of writes, etc. because these do not correspond to the actual makespan of the schedule.

    Focus on evolving the `get_best_schedule` function to produce the best schedule possible with the lowest makespan.

    Explain step-by-step the reasoning process for your solution and how this will lead to a better schedule.
  language: "python"
  init_program_path: "examples/txn_scheduling/initial.py"
  job_type: "slurm_conda"
  llm_models:
    - "o4-mini"
    - "gpt-5"
    - "gpt-5-mini"
    - "gpt-5-nano"
  llm_dynamic_selection: ucb
  llm_kwargs:
    temperatures:
      - 0.0
      - 0.5
      - 1.0
    max_tokens: 16384
  meta_rec_interval: 10
  meta_llm_models:
    - "gpt-5-nano"
  meta_llm_kwargs:
    temperatures:
      - 0.0
  embedding_model: "text-embedding-3-small"

exp_name: "shinka_txn_scheduling"
